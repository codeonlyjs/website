<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- HTML Meta Tags -->
    <title>CodeOnlyJS </title>
    <meta name="description" content="The front-end Web framework for coders." />
    <!-- Google / Search Engine Tags -->
    <meta itemprop="name" content="CodeOnlyJS " />
    <meta itemprop="description" content="The front-end Web framework for coders" />
    <meta itemprop="image" content="https://codeonlyjs.org/social-card-dark-1200.png" />
    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://codeonlyjs.org/" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="CodeOnlyJS " />
    <meta property="og:description" content="The front-end Web framework for coders" />
    <meta property="og:image" content="https://codeonlyjs.org/social-card-dark-1200.png" />
    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="CodeOnlyJS " />
    <meta name="twitter:description" content="The front-end Web framework for coders" />
    <meta name="twitter:image" content="https://codeonlyjs.org/social-card-dark-1200.png" />
    <!-- Apple -->
    <link rel="apple-touch-icon" href="https://codeonlyjs.org/codeonly-icon-256.png" />
    <!-- Meta Tags Generated via https://heymeta.com -->

    <link href="https://cdn.jsdelivr.net/gh/codeonlyjs/stylish@1.0.10/stylish.css" type="text/css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/gh/codeonlyjs/stylish@1.0.10/stylish-theme.min.js"></script>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/css.min.js"></script>
    <link id="hljs-theme" href="" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.0/min/vs/loader.js"></script>
    <script>
    require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.52.0/min/vs' } });
    </script>
    <script>
    function updateHighlightTheme()
    {
        let el = document.getElementById("hljs-theme");
        let themeFile = stylish.darkMode ? "github-dark.min.css" : "github.min.css";
        let new_href = `https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/styles/${themeFile}`;
        el.setAttribute("href", new_href);
    }
    stylish.addEventListener("darkModeChanged", updateHighlightTheme);
    updateHighlightTheme();
    </script>
    <style>
    :root
    {
        --dark-accent-color: #9D79E5;
    }
    :root.home-colors
    {
        --dark-body-back-color: #0a0b1a;
        --light-body-back-color: white;
    }
    body
    {
        padding: 0;
        margin: 0;
    }
    </style>
    <script type="module" crossorigin="crossorigin" src="/assets/index-CXDn6ClS.js"></script>
    <!--co-ssr-start--><link href="/assets/styles-AAABk3beHUc.css" type="text/css" rel="stylesheet" /><!--co-ssr-end-->
    <meta name="co-ssr" value="true" />
  </head>
  <body>
    <!--co-ssr-start-->
    <div id="layoutRoot">
      <header id="header">
        <a href="/" class="title"><img class="hide-sm" src="/public/codeonly-logo-light.svg" /><img class="hide-lg" src="/public/codeonly-icon.svg" /></a>
        <div class="buttons">
          <a href="/guide/" class="subtle button">Docs</a><a href="/lab" class="subtle button labLink vcenter"><svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 -960 960 960" preserveAspectRatio="xMidYMid slice" role="img"><path xmlns="http://www.w3.org/2000/svg" d="M200-120q-51 0-72.5-45.5T138-250l222-270v-240h-40q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760h-40v240l222 270q32 39 10.5 84.5T760-120H200Zm0-80h560L520-492v-268h-80v268L200-200Zm280-280Z"></path></svg> The Lab</a><input type="checkbox" class="theme-switch" />
          <script>
          document.querySelector(".theme-switch").checked = window.stylish.darkMode;
          </script>
        </div>
      </header>
      <div id="layoutDocumentation">
        <header id="mobile-bar"><button id="side-panel-menu-button" class="subtle muted"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 -960 960 960" preserveAspectRatio="xMidYMid slice" role="img"><path xmlns="http://www.w3.org/2000/svg" d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"></path></svg> Menu</button><button id="side-panel-menu-button" class="subtle muted">On this page ›</button></header>
        <div id="div-wrapper">
          <div id="backdrop" class=""></div>
          <div id="div-lhs" class="">
            <nav id="nav-main">
              <!-- enter foreach block -->
              <h5> Introduction</h5>
              <ul>
                <!-- enter foreach block -->
                <li><a href="." class="">Welcome</a></li>
                <li><a href="start" class="">Getting Started</a></li>
                <!-- leave foreach block -->
              </ul>
              <h5> Components</h5>
              <ul>
                <!-- enter foreach block -->
                <li><a href="components" class="">Overview</a></li>
                <li><a href="component" class="">API</a></li>
                <!-- leave foreach block -->
              </ul>
              <h5> Templates</h5>
              <ul>
                <!-- enter foreach block -->
                <li><a href="templates" class="">Basics</a></li>
                <li><a href="templateText" class="">Text and HTML</a></li>
                <li><a href="templateHtmlElements" class="">HTML Elements</a></li>
                <li><a href="templateComponents" class="">Component References</a></li>
                <li><a href="templateIf" class="">If Directive</a></li>
                <li><a href="templateForEach" class="">ForEach Directive</a></li>
                <li><a href="templateEmbedSlots" class="">Embed Slots</a></li>
                <li><a href="templateInput" class="">Input Bindings</a></li>
                <li><a href="templateTransitions" class="">Transitions</a></li>
                <li><a href="templateFluent" class="">Fluent Templates</a></li>
                <li><a href="templateUpdateSemantics" class="">Update Semantics</a></li>
                <!-- leave foreach block -->
              </ul>
              <h5> Router</h5>
              <ul>
                <!-- enter foreach block -->
                <li><a href="routerBasics" class="">Basics</a></li>
                <li><a href="routerDetails" class="">Details</a></li>
                <li><a href="routerNotes" class="">Notes</a></li>
                <li><a href="routerTypical" class="">Typical Setup</a></li>
                <li><a href="router" class="">API</a></li>
                <!-- leave foreach block -->
              </ul>
              <h5> Rendering</h5>
              <ul>
                <!-- enter foreach block -->
                <li><a href="renderIntro" class="">Introduction</a></li>
                <li><a href="renderSSR" class="">Server Side Rendering (SSR)</a></li>
                <li><a href="renderSSG" class="">Static Site Generation (SSG)</a></li>
                <li><a href="renderStatic" class="">Static Rendering</a></li>
                <!-- leave foreach block -->
              </ul>
              <h5> Utilities</h5>
              <ul>
                <!-- enter foreach block -->
                <li><a href="utilities" class="">Utilities</a></li>
                <li><a href="Notify" class="">Notify Service</a></li>
                <!-- leave foreach block -->
              </ul>
              <h5> Related</h5>
              <ul>
                <!-- enter foreach block -->
                <li><a href="stylish" class="">Stylish CSS</a></li>
                <li><a href="bundle-free" class="">Bundle Free</a></li>
                <li><a href="cogent" class="">Cogent</a></li>
                <!-- leave foreach block -->
              </ul>
              <!-- leave foreach block -->
            </nav>
          </div>
          <div id="div-center">
            <div class="document-view">
              <h1>ForEach Directive</h1>
              <p>A template node can be repeated using the <code>foreach</code> directive.</p>
              <h2 id="basic-usage"><a class="hlink" href="#basic-usage">#</a>Basic Usage</h2>
              <p>Adding a <code>foreach</code> attribute on an template node causes that node
to be repeated for each item in the array.</p>
              <pre><code class="hljs language-js"><div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div>{ 
    <span class="hljs-attr">foreach</span>: [ <span class="hljs-string">&quot;Apples&quot;</span>, <span class="hljs-string">&quot;Pears&quot;</span>, <span class="hljs-string">&quot;Bananas&quot;</span> ],
    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;div&quot;</span>,
    <span class="hljs-attr">text</span>: <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i,
},
<div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div></code></pre>
              <div id="demo-0" class="demo">
</div>
              <div class="demo-footer">
    <span></span>
    <a id="edit-demo-0" class="edit-demo-link vcenter" href="#"><svg xmlns="http://www.w3.org/2000/svg" height="22px" width="22" viewBox="0 -960 960 960"><path d="M200-120q-51 0-72.5-45.5T138-250l222-270v-240h-40q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760h-40v240l222 270q32 39 10.5 84.5T760-120H200Zm0-80h560L520-492v-268h-80v268L200-200Zm280-280Z"></path></svg><span> Edit</span></a>
</div>
              <p>On template nodes with a <code>foreach</code> directive the arguments passed
to dynamic property callbacks changes from <code>(model,context)</code> to
<code>(item,itemContext)</code>.</p>
              <ul>
                <li>
                  <p><strong><code>item</code></strong> - is the current item from the list</p>
                </li>
                <li>
                  <p><strong><code>itemContext</code></strong> is an object with additional properties relating
to the list enumeration.</p>
                  <ul>
                    <li><strong><code>context.outer</code></strong> - the outer loop context (either an enclosing
<code>foreach</code> loop context, or the component's context)</li>
                    <li><strong><code>context.model</code></strong> - the current item</li>
                    <li><strong><code>context.key</code></strong> - the current item's key (see below)</li>
                    <li><strong><code>context.index</code></strong> - the current item's zero based index in the collection</li>
                  </ul>
                </li>
              </ul>
              <p>As shown in the above example, the convention is to name the <code>item</code>
argument <code>i</code> to distinguish it from the <code>c</code> used for the component
reference.</p>
              <p>The <code>context.outer</code> property can be used to access outer <code>foreach</code>
iterators, or the component itself where <code>context.outer.model</code> will
give the actual outer component or item.</p>
              <h2 id="dynamic-collections"><a class="hlink" href="#dynamic-collections">#</a>Dynamic Collections</h2>
              <p>The above example shows using a <code>foreach</code> directive with a static
array of items but more typically a dynamic collection is used.</p>
              <p>In this example items are randomly added/removed from an array and
by calling <code>invalidate()</code> on the component, the list is updated to
reflect the new array content.</p>
              <pre><code class="hljs language-js"><div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div><span class="hljs-title function_">onAdd</span>(<span class="hljs-params"></span>)
{
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">randomPos</span>(<span class="hljs-literal">true</span>), <span class="hljs-number">0</span>, <span class="hljs-string">`New Item <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.nextItem++}</span>`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">invalidate</span>();
}
<span class="hljs-title function_">onRemove</span>(<span class="hljs-params"></span>)
{
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">randomPos</span>(<span class="hljs-literal">false</span>), <span class="hljs-number">1</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">invalidate</span>();
}
<div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div>{ 
    <span class="hljs-attr">foreach</span>: <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-property">items</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;div&quot;</span>,
    <span class="hljs-attr">text</span>: <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i,
},
<div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div></code></pre>
              <div id="demo-1" class="demo">
</div>
              <div class="demo-footer">
    <span></span>
    <a id="edit-demo-1" class="edit-demo-link vcenter" href="#"><svg xmlns="http://www.w3.org/2000/svg" height="22px" width="22" viewBox="0 -960 960 960"><path d="M200-120q-51 0-72.5-45.5T138-250l222-270v-240h-40q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760h-40v240l222 270q32 39 10.5 84.5T760-120H200Zm0-80h560L520-492v-268h-80v268L200-200Zm280-280Z"></path></svg><span> Edit</span></a>
</div>
              <h2 id="item-indicies"><a class="hlink" href="#item-indicies">#</a>Item Indicies</h2>
              <p>The <code>itemContext.index</code> property gives the zero based index of the item
in the <code>items</code> array.</p>
              <p>If the <code>condition</code> option (see below) is used, it's the index after
non-matching items have been removed. ie: the index in the filtered array.</p>
              <pre><code class="hljs language-js"><div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div>{ 
    <span class="hljs-attr">foreach</span>: <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-property">items</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;div&quot;</span>,
    <span class="hljs-attr">class_even</span>: <span class="hljs-function">(<span class="hljs-params">i,ctx</span>) =&gt;</span> (ctx.<span class="hljs-property">index</span> % <span class="hljs-number">2</span>) == <span class="hljs-number">0</span>,
    <span class="hljs-attr">class_odd</span>: <span class="hljs-function">(<span class="hljs-params">i,ctx</span>) =&gt;</span> (ctx.<span class="hljs-property">index</span> % <span class="hljs-number">2</span>) != <span class="hljs-number">0</span>,
    <span class="hljs-attr">text</span>: <span class="hljs-function">(<span class="hljs-params">i,ctx</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${ctx.index}</span>: <span class="hljs-subst">${i}</span>`</span>,
},
<div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div>css<span class="hljs-string">`
<span class="hljs-selector-class">.odd</span> { <span class="hljs-attribute">color</span>: orange }
<span class="hljs-selector-class">.even</span> { <span class="hljs-attribute">color</span>: lime }
`</span>
</code></pre>
              <div id="demo-2" class="demo">
</div>
              <div class="demo-footer">
    <span></span>
    <a id="edit-demo-2" class="edit-demo-link vcenter" href="#"><svg xmlns="http://www.w3.org/2000/svg" height="22px" width="22" viewBox="0 -960 960 960"><path d="M200-120q-51 0-72.5-45.5T138-250l222-270v-240h-40q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760h-40v240l222 270q32 39 10.5 84.5T760-120H200Zm0-80h560L520-492v-268h-80v268L200-200Zm280-280Z"></path></svg><span> Edit</span></a>
</div>
              <h2 id="options"><a class="hlink" href="#options">#</a>Options</h2>
              <p>Often when working with <code>foreach</code> directives you'll need to specify some
additional settings to control exactly how the <code>foreach</code> directive works.</p>
              <p>To specify anything more than just the array collection, use an
object as the value of the <code>foreach</code> key and set the <code>items</code> property
to the array of items to iterate over, or a callback for an array.</p>
              <pre><code class="hljs language-js">{
    <span class="hljs-attr">foreach</span>: {
        <span class="hljs-attr">items</span>: [],
        <span class="hljs-comment">// other options here</span>
    }
}
</code></pre>
              <p>The following options are supported:</p>
              <ul>
                <li><strong><code>itemKey</code></strong> - a callback function to return a key for an item.</li>
                <li><strong><code>condition</code></strong> - a callback function that indicates if an item should be
included</li>
                <li><strong><code>empty</code></strong> - template to show when the items array is empty.</li>
              </ul>
              <h3 id="options-itemkey"><a class="hlink" href="#options-itemkey">#</a>itemKey</h3>
              <p>The <code>itemKey</code> option is a callback that should provide a key value
for an item.  By providing a key, list item DOM elementscan more
efficiently re-used during updates.</p>
              <p>The value returned by the <code>itemKey</code> callback can be any value that can
be directly compared to other keys for equality using the JavaScript <code>==</code>
operator.</p>
              <p>For example, suppose we're displaying a list of items with a <code>name</code> and <code>id</code>
property:</p>
              <pre><code class="hljs language-js">{
    <span class="hljs-attr">foreach</span>: { <span class="note"><span class="inner"> foreach directive </span></span>
        <span class="hljs-attr">items</span>: <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> items, <span class="note"><span class="inner"> This provides items </span></span>
        <span class="hljs-attr">itemKey</span>: <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">id</span>, <span class="note"><span class="inner"> This provides item keys for items </span></span>
    },
    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;div&quot;</span>, <span class="note"><span class="inner"> The rest is repeated for each item </span></span>
    <span class="hljs-attr">text</span>: <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">name</span>, <span class="note"><span class="inner"> `i` is the list item </span></span>
}
</code></pre>
              <p>For more details on how item keys are used, see
<a href="#update-sematics">Update Semantics</a> below.</p>
              <div class="tip">
                <p>Ideally the key for each item should be unique however it is not strict
requirement and the update logic will handle duplicate keys - and still be
more efficient that having no keys at all.</p>
              </div>
              <h3 id="options-condition"><a class="hlink" href="#options-condition">#</a>condition</h3>
              <p>The <code>condition</code> option is a predicate callback that can be used to filter
which items in the array should be shown.  Return <code>true</code> to include
an item, or <code>false</code> to exlude it.</p>
              <p>This example filters the list to only show items with a price below $100.</p>
              <pre><code class="hljs language-js"><div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div>items = [
    { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Bread&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">4</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Phone&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">1000</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Gift Voucher&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">50</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Car&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">50000</span> },
    { <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Wine&quot;</span>, <span class="hljs-attr">price</span>: <span class="hljs-number">40</span> }
];
<div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div><span class="hljs-attr">foreach</span>: { 
    <span class="hljs-attr">items</span>: <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-property">items</span>,
    <span class="hljs-attr">condition</span>: <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">price</span> &lt; <span class="hljs-number">100</span>,
},
<span class="hljs-attr">type</span>: <span class="hljs-string">&quot;div&quot;</span>,
<span class="hljs-attr">text</span>: <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${i.name}</span>: \$<span class="hljs-subst">${i.price}</span>`</span>,
<div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div></code></pre>
              <div id="demo-3" class="demo">
</div>
              <div class="demo-footer">
    <span></span>
    <a id="edit-demo-3" class="edit-demo-link vcenter" href="#"><svg xmlns="http://www.w3.org/2000/svg" height="22px" width="22" viewBox="0 -960 960 960"><path d="M200-120q-51 0-72.5-45.5T138-250l222-270v-240h-40q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760h-40v240l222 270q32 39 10.5 84.5T760-120H200Zm0-80h560L520-492v-268h-80v268L200-200Zm280-280Z"></path></svg><span> Edit</span></a>
</div>
              <h3 id="options-empty"><a class="hlink" href="#options-empty">#</a>empty</h3>
              <p>The <code>empty</code> setting can be used to specify a template to be used if the
list of items is empty.</p>
              <pre><code class="hljs language-js"><div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div>{
    <span class="hljs-attr">foreach</span>: { 
        <span class="hljs-attr">items</span>: <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-property">items</span>,
        <span class="hljs-attr">empty</span>: { <span class="note"><span class="inner">this will be displayed if the list is empty </span></span>
            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;div&quot;</span>,
            <span class="hljs-attr">text</span>: <span class="hljs-string">&quot;Nothing Here!&quot;</span>
        }
    },
    <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;div&quot;</span>,
    <span class="hljs-attr">text</span>: <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i,
},
<div class="snip" title="Some code omitted for clarity."><span class="hline"></span><svg xmlns="http://www.w3.org/2000/svg" height="16px" width="16" viewBox="0 -960 960 960"><path d="M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"></path></svg><span class="hline"></span></div></code></pre>
              <div id="demo-4" class="demo">
</div>
              <div class="demo-footer">
    <span></span>
    <a id="edit-demo-4" class="edit-demo-link vcenter" href="#"><svg xmlns="http://www.w3.org/2000/svg" height="22px" width="22" viewBox="0 -960 960 960"><path d="M200-120q-51 0-72.5-45.5T138-250l222-270v-240h-40q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760h-40v240l222 270q32 39 10.5 84.5T760-120H200Zm0-80h560L520-492v-268h-80v268L200-200Zm280-280Z"></path></svg><span> Edit</span></a>
</div>
              <h2 id="update-semantics"><a class="hlink" href="#update-semantics">#</a>Update Semantics</h2>
              <p>The <code>foreach</code> directive uses one of two strategies to apply updates depending
on whether an <code>itemKey</code> callback has been supplied.</p>
              <h3 id="update-semantics-unkeyed"><a class="hlink" href="#update-semantics-unkeyed">#</a>Unkeyed</h3>
              <p>When item keys are not provided the list is updated by re-using the previous DOM
elements in the same order, updating each with the new item at that position,
and then adding or removing elements at the end to match the new item count.</p>
              <p>With this strategy, the re-used items are not unmounted/remounted - they're
simply in-place patched.</p>
              <p>This works well for small lists and is easy to use, but for larger lists may
not perform well as a single insert or delete near the start of the
list may mean every subsequent element needs a full update.</p>
              <h3 id="update-semantics-keyed"><a class="hlink" href="#update-semantics-keyed">#</a>Keyed</h3>
              <p>When a keyed <code>foreach</code> block updates the item keys for the new and old
arrays are compared and each item is determined to be either:</p>
              <ul>
                <li>an existing item - one that appears in both arrays</li>
                <li>a new item - one that didn't exist in the old array, but does in the new</li>
                <li>an old item - one that did exist in the old array, but does not in the new</li>
              </ul>
              <p>The items are then updated:</p>
              <ul>
                <li>existing items - re-use the same DOM elements as the matching item
from before.</li>
                <li>old items - elements are either discarded or re-purposed for new items</li>
                <li>new items - old elements are re-purposed if available, or new elements created</li>
              </ul>
              <p>In this strategy, when an items is re-purposed it will first be unmounted,
changed properties applied and then re-mounted after being added back into
the DOM.</p>
              <p>This strategy can dramatically improve the performance of typical list
updates as most items will be re-used and not require significant
updates.</p>
              <h3 id="update-semantics-components"><a class="hlink" href="#update-semantics-components">#</a>Components</h3>
              <p>When a <code>foreach</code> block includes a nested component, the changed properties
of the component will be applied, but the component's <code>update</code> method
is <em>not</em> called.</p>
              <p>This is consistent with how templates update components used elsewhere
but warrants some consideration for <code>foreach</code> blocks.</p>
              <p>Often a <code>foreach</code> block will be used to display a set of items where
each item is an object that's displayed using a component.</p>
              <p>As an example, say you're building a photo management app and you have
a <code>Photo</code> object with properties for various attributes of each photo:</p>
              <pre><code class="hljs language-js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Photo</span>
{
    filename;
    size;
    date;
    favorite;
}
</code></pre>
              <p>You also have a <code>PhotoCell</code> component that can display
a thumbnail view for a single photo:</p>
              <pre><code class="hljs language-js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PhotoCell</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span>
{
    #photo;
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">photo</span>()
    {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.#photo;
    }
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">photo</span>(<span class="hljs-params">val</span>)
    {
        <span class="hljs-variable language_">this</span>.#photo = value;
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">invalidate</span>();
    }

    <span class="hljs-keyword">static</span> template = { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
              <p>You could show a collection of photos using a <code>foreach</code> block:</p>
              <pre><code class="hljs language-js">{
    <span class="hljs-attr">foreach</span>: {
        <span class="hljs-attr">items</span>: <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-property">allPhotos</span>,
        <span class="hljs-attr">itemKey</span>: <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">filename</span>,
    },
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">PhotoCell</span>,
    <span class="hljs-attr">photo</span>: <span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i,
}
</code></pre>
              <p>How this works for updates will depend on whether you replace
the <code>Photo</code> instance when it changes, or just update its properties.</p>
              <ul>
                <li>
                  <p>If the <code>Photo</code> instance is replaced with a new instance, but the same
key, the template will see the <code>PhotoCell.photo</code> property as being
different and assign the new value to the component.  The component will
update itself and the changes will be reflected in the DOM.</p>
                </li>
                <li>
                  <p>If however properties of the <code>Photo</code> are updated, the template will<br />
consider the <code>PhotoCell.photo</code> property unchanged, won't re-assign it
and the DOM won't be updated.</p>
                </li>
              </ul>
              <p>While the behaviour in the second case may seem inconvenient and problematic
this is actually the exact behaviour you want when managing large collections
because it allows you to make small and precise updates.</p>
              <p>One way to handle this is to use <a href="templateUpdateSemantics#deep-component-updates">deep component updates</a>
although this is generally not recommended - especially for large collections.</p>
              <p>The correct way to handle this is to have the <code>Photo</code> object fire change events and
for the <code>PhotoCell</code> component to add listeners for those events.  In other
words this is a problem that should be solved by the <code>Photo</code> object and
<code>PhotoCell</code> component - not by the <code>foreach</code> block.</p>
              <p>To setup this event/listener mechanism you can either roll your own event
system, use the standard
<a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget"><code>EventTarget</code></a>
mechanism, or use CodeOnly's <a href="Notify"><code>notify</code></a>.</p>
              <p>Also consider using <a href="components#listening-to-external-events"><code>Component.listen</code></a> to simplify adding
and removing event listeners in the item component.</p>
            </div>
            <nav class="next-previous-navigation"><a class="previous" href="templateIf"><div class="description muted">‹ Previous</div><div class="title">If Directive</div></a><a class="next" href="templateEmbedSlots"><div class="description muted">Next ›</div><div class="title">Embed Slots</div></a></nav>
          </div>
          <div id="div-rhs" class="">
            <nav id="secondary-nav">
              <div class="highlight"></div>
              <a href="#" class="title">ForEach Directive</a>
              <ul class="h1">
                <!-- enter foreach block -->
                <li><a href="#basic-usage">Basic Usage</a><!-- IfBlock placeholder --></li>
                <li><a href="#dynamic-collections">Dynamic Collections</a><!-- IfBlock placeholder --></li>
                <li><a href="#item-indicies">Item Indicies</a><!-- IfBlock placeholder --></li>
                <li>
                  <a href="#options">Options</a>
                  <ul class="h2">
                    <!-- enter foreach block -->
                    <li><a href="#options-itemkey">itemKey</a></li>
                    <li><a href="#options-condition">condition</a></li>
                    <li><a href="#options-empty">empty</a></li>
                    <!-- leave foreach block -->
                  </ul>
                </li>
                <li>
                  <a href="#update-semantics">Update Semantics</a>
                  <ul class="h2">
                    <!-- enter foreach block -->
                    <li><a href="#update-semantics-unkeyed">Unkeyed</a></li>
                    <li><a href="#update-semantics-keyed">Keyed</a></li>
                    <li><a href="#update-semantics-components">Components</a></li>
                    <!-- leave foreach block -->
                  </ul>
                </li>
                <!-- leave foreach block -->
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
    <!--co-ssr-end-->
  </body>
</html>
