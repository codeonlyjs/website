var vt=Object.defineProperty;var st=o=>{throw TypeError(o)};var bt=(o,e,t)=>e in o?vt(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var j=(o,e,t)=>bt(o,typeof e!="symbol"?e+"":e,t),He=(o,e,t)=>e.has(o)||st("Cannot "+t);var l=(o,e,t)=>(He(o,e,"read from private field"),t?t.call(o):e.get(o)),T=(o,e,t)=>e.has(o)?st("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),N=(o,e,t,n)=>(He(o,e,"write to private field"),n?n.call(o,t):e.set(o,t),t),M=(o,e,t)=>(He(o,e,"access private method"),t);var we=(o,e,t,n)=>({set _(i){N(o,e,i,t)},get _(){return l(o,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();let C=null;var te;class Nt extends EventTarget{constructor(){super();T(this,te,0);this.browser=!1}enterLoading(){we(this,te)._++,l(this,te)==1&&this.dispatchEvent(new Event("loading"))}leaveLoading(){we(this,te)._--,l(this,te)==0&&this.dispatchEvent(new Event("loaded"))}get loading(){return l(this,te)!=0}async load(t){this.enterLoading();try{return await t()}finally{this.leaveLoading()}}}te=new WeakMap;function xt(o){C=o}class B{constructor(e){this.html=e}static areEqual(e,t){return e instanceof B&&t instanceof B&&e.html==t.html}}function wt(o){return o instanceof Function?(...e)=>new B(o(...e)):new B(o)}class Tt{constructor(e){this.value=e}}let ot=[],Re=[],Te=null;class at{static declare(e){ot.push(e),Re.push(e),C.browser&&C.requestAnimationFrame(_t)}static get all(){return ot.join(`
`)}}function _t(){Re.length!=0&&(Te==null&&(Te=document.createElement("style")),Te.innerHTML+=Re.join(`
`),Re=[],Te.parentNode||document.head.appendChild(Te))}let Fe=[],ze=!1;function St(o,e){o&&(e=e??0,e!=0&&(ze=!0),Fe.push({callback:o,order:e}),Fe.length==1&&C.requestAnimationFrame(function(){let t=Fe;ze&&(t.sort((n,i)=>i.order-n.order),ze=!1),Fe=[];for(let n=t.length-1;n>=0;n--)t[n].callback()}))}class Ct{static compile(){return C.compileTemplate(...arguments)}}var R,de,ne,G,ge;const ee=class ee extends EventTarget{constructor(){super();T(this,R);T(this,de,null);T(this,ne,0);T(this,G);T(this,ge,!1);this.update=this.update.bind(this),this.invalidate=this.invalidate.bind(this)}static get domTreeConstructor(){return this._domTreeConstructor||(this._domTreeConstructor=this.onProvideDomTreeConstructor()),this._domTreeConstructor}static onProvideDomTreeConstructor(){return Ct.compile(this.onProvideTemplate())}static onProvideTemplate(){return this.template}static get isSingleRoot(){return this.domTreeConstructor.isSingleRoot}create(){l(this,R)||N(this,R,new this.constructor.domTreeConstructor({model:this}))}get created(){return l(this,R)!=null}get domTree(){return l(this,R)||this.create(),l(this,R)}get isSingleRoot(){return this.domTree.isSingleRoot}get rootNode(){if(!this.isSingleRoot)throw new Error("rootNode property can't be used on multi-root template");return this.domTree.rootNode}get rootNodes(){return this.domTree.rootNodes}invalidate(){l(this,R)&&(this.invalid||(this.invalid=!0,ee.invalidate(this)))}validate(){this.invalid&&this.update()}static invalidate(t){this._invalidComponents.push(t),this._invalidComponents.length==1&&St(()=>{for(let n=0;n<this._invalidComponents.length;n++)this._invalidComponents[n].validate();this._invalidComponents=[]},ee.nextFrameOrder)}update(){l(this,R)&&(this.invalid=!1,this.domTree.update())}get loadError(){return l(this,de)}set loadError(t){N(this,de,t),this.invalidate()}get loading(){return l(this,ne)!=0}set loading(t){throw new Error("setting Component.loading not supported, use load() function")}async load(t){we(this,ne)._++,l(this,ne)==1&&(N(this,de,null),this.invalidate(),C.enterLoading(),this.dispatchEvent(new Event("loading")));try{return await t()}catch(n){N(this,de,n)}finally{we(this,ne)._--,l(this,ne)==0&&(this.invalidate(),this.dispatchEvent(new Event("loaded")),C.leaveLoading())}}render(t){this.domTree.render(t)}destroy(){l(this,R)&&(l(this,R).destroy(),N(this,R,null))}onMount(){}onUnmount(){}listen(t,n,i){t.addEventListener(n,i),this.cleanup(()=>t.removeEventListener(n,i))}setInterval(){let t=setInterval(...arguments);return this.cleanup(()=>clearInterval(t)),t}cleanup(t){if(!l(this,ge))throw new Error("Invalid when not mounted");l(this,G)||N(this,G,[]),l(this,G).push(t)}get mounted(){return l(this,ge)}setMounted(t){var n;(n=l(this,R))==null||n.setMounted(t),N(this,ge,t),t?this.onMount():this.onUnmount(),t||l(this,G)&&(l(this,G).forEach(i=>i()),N(this,G,[]))}mount(t){return typeof t=="string"&&(t=document.querySelector(t)),t.append(...this.rootNodes),this.setMounted(!0),this}unmount(){l(this,R)&&this.rootNodes.forEach(t=>t.remove()),this.setMounted(!1)}};R=new WeakMap,de=new WeakMap,ne=new WeakMap,G=new WeakMap,ge=new WeakMap,j(ee,"_domTreeConstructor"),j(ee,"nextFrameOrder",-100),j(ee,"_invalidComponents",[]),j(ee,"template",{});let Ie=ee;class Y{static embed(e){return{type:"embed-slot",content:e}}static h(e,t){return{type:`h${e}`,text:t}}static p(e){return{type:"p",text:e}}static a(e,t){return{type:"a",attr_href:e,text:t}}static raw(e){return wt(e)}static encode(e){return e==null?"":(""+e).replace(/["'&<>]/g,function(t){switch(t){case'"':return"&quot;";case"&":return"&amp;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;"}})}}function nt(o,e){let t,n,i=[],a=[],h=[],u=!1,v=!1,f=!1;function p(x){return x instanceof Function?x(e.model,e):x}p(o.name);let d=p(o.mode),g=p(o.clasNames),r=p(o.duration),_=p(o.subtree);switch(d){case"enter-leave":case"leave-enter":break;default:d="";break}r!=null&&!Array.isArray(r)&&(r=[r,r]);function k(x){let S=[];for(let D of x){let F=(g==null?void 0:g[D])??nt.defaultClassNames[D];F=(F??"").split(";"),F=F.map(P=>P.replace(/\*/g,o.name??"tx")),S.push(...F)}return S}function c(x,S){let D=k(S);D.length&&x.forEach(F=>{var P;return(P=F.classList)==null?void 0:P.add(...D)})}function b(x,S){let D=k(S);D.length&&x.forEach(F=>{var P;return(P=F.classList)==null?void 0:P.remove(...D)})}function I(x,S,D){requestAnimationFrame(()=>requestAnimationFrame(()=>{c(x,[S]),b(x,[D])})),h.push(...x)}function z(){v=!0,c(i,["entering","enter-start"]),t==null||t(),t=null,I(i,"enter-end","enter-start")}function Z(){v=!1,b(i,["enter-start","entering","enter-end"])}function ke(){f=!0,c(a,["leaving","leave-start"]),I(a,"leave-end","leave-start")}function xe(){f=!1,b(a,["leave-start","leaving","leave-end"]),n==null||n(),n=null}function De(x){if(r!==void 0){let S=0;return v&&(S=S[0]),f&&(S=Math.max(S,S[1])),new Promise(D=>setTimeout(D,S))}return new Promise((S,D)=>{requestAnimationFrame(()=>requestAnimationFrame(()=>{requestAnimationFrame(()=>{let F=[];for(let P of h)P.nodeType==1&&F.push(...P.getAnimations({subtree:_??!0}));h=[],Promise.allSettled(F.map(P=>P.finished)).then(S)})}))})}async function Oe(){var x,S;(x=o.on_start)==null||x.call(o,e.model,e),(d==""||d=="enter-leave")&&z(),(d==""||d=="leave-enter")&&ke(),await De(),!u&&(d!=""?(d=="enter-leave"?(ke(),Z()):d=="leave-enter"&&(z(),xe()),await De()):(Z(),xe()),u=!0,(S=o.on_finish)==null||S.call(o,e.model,e))}function We(){var x;u||(u=!0,t==null||t(),Z(),xe(),(x=o.on_cancel)==null||x.call(o,e.model,e))}return{enterNodes:function(x){i.push(...x)},leaveNodes:function(x){a.push(...x)},onWillEnter:function(x){t=x},onDidLeave:function(x){n=x},start:Oe,finish:We}}nt.defaultClassNames={entering:"*-entering;*-active","enter-start":"*-enter-start;*-out","enter-end":"*-enter-end;*-in",leaving:"*-leaving;*-active","leave-start":"*-leave-start;*-in","leave-end":"*-leave-end;*-out"};function Wt(){let o={};for(let t=0;t<arguments.length;t++){let n=arguments[t];if(n instanceof Function)o.value=n;else if(typeof n=="string")o.name=n;else if(typeof n=="object")Object.assign(o,n);else throw new Error("Invalid argument to transition")}let e=function(){return o.value(...arguments)};return e.withTransition=function(t){return o.type?new o.type(o,t):nt(o,t)},e}let dt={enterNodes:function(){},leaveNodes:function(){},onWillEnter:function(o){o()},onDidLeave:function(o){o()},start:function(){},finish:function(){}};class Et{constructor(e){this.$el={type:e}}append(...e){e=e.flat(1e3).map(t=>t.$el??t),this.$el.$?this.$el.$.push(...e):this.$el.$=[...e]}setAttr(e,t){if((e=="class"||e=="style")&&arguments.length>2?(e=`${e}_${t}`,t=arguments[2]):e=="on"&&arguments.length>2?(e=`on_${t}`,t=arguments[2]):e=="type"&&(e="attr_type"),this.$el[e]!==void 0)throw new Error(`duplicate attribute: ${e}`);this.$el[e]=t}}let Mt={get:function(o,e){if(e!="bind"){let t=Reflect.get(o,e);if(t!==void 0)return t}return(...t)=>(Reflect.get(o,"$tb").setAttr(e,...t),Reflect.get(o,"$proxy"))}},Lt={get:function(o,e){let t=Reflect.get(o,e);return t!==void 0?t:Je(e)}};function Je(o){let e=new Et(o),t,n=function(){return e.append(...arguments),t};return n.$tb=e,n.$el=e.$el,t=new Proxy(n,Mt),n.$proxy=t,t}Je.raw=Y.raw;Je.encode=Y.encode;new Proxy(Je,Lt);function je(o){return o.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Ge(o){return o instanceof Function&&!!o.prototype&&!!o.prototype.constructor}let kt=/^[a-zA-Z$][a-zA-Z0-9_$]*$/;function le(o){return o.match(kt)?`.${o}`:`[${JSON.stringify(o)}]`}function Zt(o,e){o.loading?o.addEventListener("loaded",e,{once:!0}):e()}function Be(){let o=[],e="";function t(...f){for(let p=0;p<f.length;p++){let d=f[p];d.lines?o.push(...d.lines.map(g=>e+g)):Array.isArray(d)?o.push(...d.filter(g=>g!=null).map(g=>e+g)):o.push(...d.split(`
`).map(g=>e+g))}}function n(){e+="  "}function i(){e=e.substring(2)}function a(){return o.join(`
`)+`
`}function h(f){t("{"),n(),f(this),i(),t("}")}function u(...f){let p={pos:this.lines.length};return this.append(f),p.headerLineCount=this.lines.length-p.pos,p}function v(f,...p){this.lines.length==f.pos+f.headerLineCount?this.lines.splice(f.pos,f.headerLineCount):this.append(p)}return{append:t,enterCollapsibleBlock:u,leaveCollapsibleBlock:v,indent:n,unindent:i,braced:h,toString:a,lines:o,get isEmpty(){return o.length==0}}}class it{constructor(){this.code=Be(),this.code.closure=this,this.functions=[],this.locals=[],this.prologs=[],this.epilogs=[]}get isEmpty(){return this.code.isEmpty&&this.locals.length==0&&this.functions.every(e=>e.code.isEmpty)&&this.prologs.every(e=>e.isEmpty)&&this.epilogs.every(e=>e.isEmpty)}addProlog(){let e=Be();return this.prologs.push(e),e}addEpilog(){let e=Be();return this.epilogs.push(e),e}addLocal(e,t){this.locals.push({name:e,init:t})}addFunction(e,t){t||(t=[]);let n={name:e,args:t,code:new it};return this.functions.push(n),n.code}getFunction(e){var t;return(t=this.functions.find(n=>n.name==e))==null?void 0:t.code}toString(){let e=Be();return this.appendTo(e),e.toString()}appendTo(e){this.locals.length>0&&e.append(`let ${this.locals.map(t=>t.init?`${t.name} = ${t.init}`:t.name).join(", ")};`);for(let t of this.prologs)e.append(t);e.append(this.code);for(let t of this.functions)e.append(`function ${t.name}(${t.args.join(", ")})`),e.append("{"),e.indent(),t.code.appendTo(e),e.unindent(),e.append("}");for(let t of this.epilogs)e.append(t)}}class K{static rawText(e){return e instanceof B?e.html:Y.encode(e)}static renderToString(e){let t="";return e({write:function(n){t+=n}}),t}static renderComponentToString(e){let t="";return e.render({write:function(n){t+=n}}),t}static rawStyle(e){let t;return e instanceof B?t=e.html:t=Y.encode(e),t=t.trim(),t.endsWith(";")||(t+=";"),t}static rawNamedStyle(e,t){if(!t)return"";let n;return t instanceof B?n=t.html:n=Y.encode(t),n=n.trim(),n+=";",`${e}:${n}`}static createTextNode(e){if(e instanceof B){let t=document.createElement("SPAN");return t.innerHTML=e.html,t}else return document.createTextNode(e)}static setElementAttribute(e,t,n){n===void 0?e.removeAttribute(t):e.setAttribute(t,n)}static setElementText(e,t){t instanceof B?e.innerHTML=t.html:e.innerText=t}static setNodeText(e,t){if(t instanceof B){if(e.nodeType==1)return e.innerHTML=t.html,e;let n=document.createElement("SPAN");return n.innerHTML=t.html,e.replaceWith(n),n}else{if(e.nodeType==3)return e.nodeValue=t,e;let n=document.createTextNode(t);return e.replaceWith(n),n}}static setNodeClass(e,t,n){n?e.classList.add(t):e.classList.remove(t)}static setNodeStyle(e,t,n){n==null?e.style.removeProperty(t):e.style[t]=n}static boolClassMgr(e,t,n,i){let a=null,h=i(e.model,e);return K.setNodeClass(t,n,h),function(){let v=i(e.model,e);v!=h&&(h=v,i.withTransition&&t.isConnected?(a==null||a.finish(),a=i.withTransition(e),v?(a.enterNodes([t]),a.onWillEnter(()=>t.classList.add(n))):(a.leaveNodes([t]),a.onDidLeave(()=>t.classList.remove(n))),a.start()):K.setNodeClass(t,n,v))}}static setNodeDisplay(e,t,n){if(t===!0){n===null?e.style.removeProperty("display"):n!==void 0&&e.style.display!=n&&(e.style.display=n);return}else if(t===!1||t===null||t===void 0){let i=e.style.display;return e.style.display!="none"&&(e.style.display="none"),i??null}else if(typeof t=="string"){let i=e.style.display;return e.style.display!=t&&(e.style.display=t),i??null}}static displayMgr(e,t,n){let i=null,a=n(e.model,e),h=K.setNodeDisplay(t,a,void 0),u;return C.browser&&(u=window.getComputedStyle(t).getPropertyValue("display")),function(){let f=n(e.model,e);if(f!=a){if(a=f,C.browser&&n.withTransition&&t.isConnected){i==null||i.finish();let p=window.getComputedStyle(t).getPropertyValue("display"),d;if(f===!0?d=u:f===!1||f===null||f===void 0?d="none":d=f,p=="none"!=(d=="none")){i=n.withTransition(e),d!="none"?(i.enterNodes([t]),i.onWillEnter(()=>h=K.setNodeDisplay(t,f,h))):(i.leaveNodes([t]),i.onDidLeave(()=>h=K.setNodeDisplay(t,f,h))),i.start();return}}h=K.setNodeDisplay(t,f,h)}}}static replaceMany(e,t){var n;if((n=e==null?void 0:e[0])!=null&&n.parentNode){e[0].replaceWith(...t);for(let i=1;i<e.length;i++)e[i].remove()}}static addEventListener(e,t,n,i){function a(h){return i(e(),h)}return t.addEventListener(n,a),function(){t.removeEventListener(n,a)}}}class Ne{static register(e){this.plugins.push(e)}static transform(e){for(let t of this.plugins)t.transform&&(e=t.transform(e));return e}static transformGroup(e){var t;for(let n of this.plugins)(t=n.transformGroup)==null||t.call(n,e)}}j(Ne,"plugins",[]);class re{constructor(e,t){if(e.$el&&(e=e.$el),Array.isArray(e)&&(e={$:e}),e=Ne.transform(e),Ge(e)&&(e={type:e}),this.template=e,Ge(e.type))e.type.integrate?this.kind="integrated":this.kind="component";else if(typeof e=="string")this.kind="text";else if(e instanceof B){if(this.kind="html",this.html=e.html,C.document){let n=C.document.createElement("div");n.innerHTML=e.html,this.nodes=[...n.childNodes],this.nodes.forEach(i=>i.remove())}}else e instanceof Function?this.kind="dynamic_text":e.type==="#comment"?this.kind="comment":e.type===void 0?this.kind="fragment":this.kind="element";if(this.kind==="integrated"&&(e.$&&!e.content&&(e.content=e.$,delete e.$),this.integrated=this.template.type.integrate(this.template,t)),this.kind=="element"&&e.$&&!e.text&&(typeof e.$=="string"||e.$ instanceof B)&&(e.text=e.$,delete e.$),this.kind=="element"||this.kind=="fragment")e.$&&!e.childNodes&&(e.childNodes=e.$,delete e.$),e.childNodes?(Array.isArray(e.childNodes)?e.childNodes=e.childNodes.flat():e.childNodes=[e.childNodes],e.childNodes=e.childNodes.map(n=>n.$el??n),Ne.transformGroup(e.childNodes),this.childNodes=this.template.childNodes.map(n=>new re(n,t))):this.childNodes=[];else if(this.isComponent)e.$&&!e.content&&(e.content=e.$,delete e.$);else if(e.childNodes)throw new Error("childNodes only supported on element and fragment nodes")}get isSingleRoot(){return this.isFragment?this.childNodes.length==1&&this.childNodes[0].isSingleRoot:this.isComponent?this.template.type.isSingleRoot:this.isIntegrated?this.integrated.isSingleRoot:this.kind=="html"?this.nodes.length==1:!0}get isComponent(){return this.kind==="component"}get isFragment(){return this.kind==="fragment"}get isIntegrated(){return this.kind==="integrated"}*enumLocalNodes(){if(this.isFragment||(yield this),this.childNodes)for(let e=0;e<this.childNodes.length;e++)yield*this.childNodes[e].enumLocalNodes()}spreadChildDomNodes(){return Array.from(e(this)).filter(t=>t.length>0).join(", ");function*e(t){for(let n=0;n<t.childNodes.length;n++)yield t.childNodes[n].spreadDomNodes()}}spreadDomNodes(){return Array.from(this.enumAllNodes()).join(", ")}*enumAllNodes(){switch(this.kind){case"fragment":for(let e=0;e<this.childNodes.length;e++)yield*this.childNodes[e].enumAllNodes();break;case"component":case"integrated":this.isSingleRoot?yield`${this.name}.rootNode`:yield`...${this.name}.rootNodes`;break;case"html":this.nodes.length>0&&(this.nodes.length>1?yield`...${this.name}`:yield`${this.name}`);break;default:yield this.name}}}var J,O,ie,A,ye,$e,Ce,Ee,V,_e,U,ht,ve;const Pe=class Pe{constructor(e){T(this,V);T(this,J);T(this,O);T(this,ie);T(this,A);T(this,ye);T(this,$e);T(this,Ce);T(this,Ee);T(this,U,!0);T(this,ve);var t,n;N(this,J,e.context),N(this,Ce,e.nodes[1]),N(this,ye,(t=C.document)==null?void 0:t.createTextNode("")),N(this,$e,(n=C.document)==null?void 0:n.createTextNode("")),N(this,U,e.data.ownsContent??!0),e.nodes[0]?this.content=e.nodes[0]():this.content=e.data.content}static integrate(e,t){let n=null;e.content&&typeof e.content=="object"&&(n=e.content,delete e.content);let i={isSingleRoot:!1,data:{ownsContent:e.ownsContent??!0,content:e.content},nodes:[n?new re(n,t):null,e.placeholder?new re(e.placeholder,t):null]};return delete e.content,delete e.placeholder,delete e.ownsContent,i}static transform(e){return e instanceof Function&&!Ge(e)?{type:Pe,content:e}:(e.type=="embed-slot"&&(e.type=Pe),e)}get rootNodes(){return[l(this,ye),...l(this,V,_e),l(this,$e)]}get isSingleRoot(){return!1}get ownsContent(){return l(this,U)}set ownsContent(e){N(this,U,e)}get content(){return l(this,O)}set content(e){N(this,O,e),l(this,O)instanceof Function?this.replaceContent(l(this,O).call(l(this,J).model,l(this,J).model,l(this,J))):this.replaceContent(l(this,O))}update(){l(this,O)instanceof Function&&this.replaceContent(l(this,O).call(l(this,J).model,l(this,J).model,l(this,J)))}bind(){var e,t;l(this,ie)||(t=(e=l(this,A))==null?void 0:e.bind)==null||t.call(e)}unbind(){var e,t;l(this,ie)||(t=(e=l(this,A))==null?void 0:e.unbind)==null||t.call(e)}get isAttached(){}setMounted(e){var t,n;N(this,ve,e),(n=(t=l(this,A))==null?void 0:t.setMounted)==null||n.call(t,e)}replaceContent(e){var a,h,u,v,f,p,d,g;if(l(this,ie)==e||B.areEqual(l(this,ie),e))return;let t=l(this,A),n=[...l(this,V,_e)];N(this,ie,e);let i;if(!e)i=((a=l(this,Ce))==null?void 0:a.call(this,l(this,J)))??null;else if(e.rootNodes)i=e;else if(e instanceof B){let r=C.document.createElement("span");r.innerHTML=e.html,i=[...r.childNodes],i.forEach(_=>_.remove())}else if(typeof e=="string")i=[C.document.createTextNode(e)];else if(Array.isArray(e))i=e;else if(C.Node!==void 0&&e instanceof C.Node)i=[e];else if(e.render)i=e;else throw new Error("Embed slot requires component, array of HTML nodes or a single HTML node");if(N(this,A,i),l(this,V,ht)){(h=l(this,Ee))==null||h.finish();let r;l(this,ve)&&(r=(v=(u=l(this,O))==null?void 0:u.withTransition)==null?void 0:v.call(u,l(this,J))),r||(r=dt),N(this,Ee,r),r.enterNodes(l(this,V,_e)),r.leaveNodes(n),r.onWillEnter(()=>{var _,k;l(this,$e).before(...l(this,V,_e)),(k=(_=l(this,A))==null?void 0:_.setMounted)==null||k.call(_,!0)}),r.onDidLeave(()=>{var _,k;n.forEach(c=>c.remove()),(_=t==null?void 0:t.setMounted)==null||_.call(t,!1),l(this,U)&&((k=t==null?void 0:t.destroy)==null||k.call(t))}),r.start()}else l(this,ve)&&((f=t==null?void 0:t.setMounted)==null||f.call(t,!1),(d=(p=l(this,A))==null?void 0:p.setMounted)==null||d.call(p,!0)),l(this,U)&&((g=t==null?void 0:t.destroy)==null||g.call(t))}destroy(){var e,t;l(this,U)&&((t=(e=l(this,A))==null?void 0:e.destroy)==null||t.call(e))}render(e){var t,n;(n=(t=l(this,A))==null?void 0:t.render)==null||n.call(t,e)}};J=new WeakMap,O=new WeakMap,ie=new WeakMap,A=new WeakMap,ye=new WeakMap,$e=new WeakMap,Ce=new WeakMap,Ee=new WeakMap,V=new WeakSet,_e=function(){var e;return((e=l(this,A))==null?void 0:e.rootNodes)??l(this,A)??[]},U=new WeakMap,ht=function(){var e;return((e=l(this,ye))==null?void 0:e.parentNode)!=null},ve=new WeakMap;let Ue=Pe;Ne.register(Ue);function Dt(o,e){let t=Math.min(o.length,e.length),n=Math.max(o.length,e.length),i=0;for(;i<t&&o[i]==e[i];)i++;if(i==n)return[];if(i==o.length)return[{op:"insert",index:o.length,count:e.length-o.length}];let a=0;for(;a<t-i&&o[o.length-a-1]==e[e.length-a-1];)a++;if(a==o.length)return[{op:"insert",index:0,count:e.length-o.length}];if(i+a==o.length)return[{op:"insert",index:i,count:e.length-o.length}];if(i+a==e.length)return[{op:"delete",index:i,count:o.length-e.length}];let h=o.length-a,u=e.length-a,v=k(e,i,u),f=null,p=[],d=i,g=i;for(;d<u;){for(;d<u&&o[g]==e[d];)v.delete(e[d],d),d++,g++;let c=d,b=g;for(;g<h&&!v.has(o[g]);)g++;if(g>b){p.push({op:"delete",index:c,count:g-b});continue}for(f||(f=k(o,d,h));d<u&&!f.has(e[d]);)v.delete(e[d],d),d++;if(d>c){p.push({op:"insert",index:c,count:d-c});continue}break}if(d==u)return p;let r=0,_=new rt;for(;g<h;){let c=g;for(;g<h&&!v.has(o[g]);)g++;if(g>c){p.push({op:"delete",index:d,count:g-c});continue}for(;g<h&&v.consume(o[g])!==void 0;)_.add(o[g],r++),g++;g>c&&p.push({op:"store",index:d,count:g-c})}for(;d<u;){let c=d;for(;d<u&&!_.has(e[d]);)d++;if(d>c){p.push({op:"insert",index:c,count:d-c});continue}let b={op:"restore",index:d,count:0};for(p.push(b);d<u;){let I=_.consume(e[d]);if(I===void 0)break;b.count==0?(b.storeIndex=I,b.count=1):b.storeIndex+b.count==I?b.count++:(b={op:"restore",index:d,storeIndex:I,count:1},p.push(b)),d++}}return p;function k(c,b,I){let z=new rt;for(let Z=b;Z<I;Z++)z.add(c[Z],Z);return z}}var se;class rt{constructor(){T(this,se,new Map)}add(e,t){let n=l(this,se).get(e);n?n.push(t):l(this,se).set(e,[t])}delete(e,t){let n=l(this,se).get(e);if(n){let i=n.indexOf(t);if(i>=0){n.splice(i,1);return}}throw new Error("key/value pair not found")}consume(e){let t=l(this,se).get(e);if(!(!t||t.length==0))return t.shift()}has(e){return l(this,se).has(e)}}se=new WeakMap;var be,H,W,y,ct,Ye,he,ce,Me,ue,ae,ut,Qe,ft,Xe,pt,Ke,mt,et,me;const Ae=class Ae{constructor(e){T(this,y);T(this,be);T(this,H);T(this,W,!1);T(this,he);T(this,ce);T(this,Me);T(this,ue);var t,n;this.itemConstructor=e.data.itemConstructor,this.outer=e.context,this.items=e.data.template.items,this.condition=e.data.template.condition,this.itemKey=e.data.template.itemKey,this.emptyConstructor=e.nodes.length?e.nodes[0]:null,this.itemDoms=[],N(this,be,(t=C.document)==null?void 0:t.createComment(" enter foreach block ")),N(this,H,(n=C.document)==null?void 0:n.createComment(" leave foreach block ")),this.itemConstructor.isSingleRoot?(N(this,he,M(this,y,pt)),N(this,Me,M(this,y,mt)),N(this,ce,M(this,y,Ke)),N(this,ue,M(this,y,et))):(N(this,he,M(this,y,ut)),N(this,Me,M(this,y,ft)),N(this,ce,M(this,y,Qe)),N(this,ue,M(this,y,Xe)))}static integrate(e,t){let n={itemConstructor:t.compileTemplate(e.template),template:{items:e.items,condition:e.condition,itemKey:e.itemKey}},i;return e.empty&&(i=[new re(e.empty,t)]),delete e.template,delete e.items,delete e.condition,delete e.itemKey,delete e.empty,{isSingleRoot:!1,data:n,nodes:i}}static transform(e){if(e.foreach===void 0)return e;let t;return e.foreach instanceof Function||Array.isArray(e.foreach)?(t={type:Ae,template:e,items:e.foreach},delete e.foreach):(t=Object.assign({},e.foreach,{type:Ae,template:e}),delete e.foreach),t}get rootNodes(){let e=this.emptyDom?this.emptyDom.rootNodes:[];if(this.itemConstructor.isSingleRoot)return[l(this,be),...this.itemDoms.map(t=>t.rootNode),...e,l(this,H)];{let t=[l(this,be)];for(let n=0;n<this.itemDoms.length;n++)t.push(...this.itemDoms[n].rootNodes);return t.push(...e),t.push(l(this,H)),t}}setMounted(e){N(this,W,e),pe(this.itemDoms,e)}update(){let e;this.items instanceof Function?e=this.items.call(this.outer.model,this.outer.model,this.outer):e=this.items,e=e??[];let t={outer:this.outer},n=null;if(this.condition&&(e=e.filter(i=>(t.model=i,this.condition.call(i,i,t)))),this.itemKey&&(n=e.map(i=>(t.model=i,this.itemKey.call(i,i,t)))),!this.itemsLoaded){this.itemsLoaded=!0,l(this,he).call(this,e,n,0,0,e.length),M(this,y,Ye).call(this);return}M(this,y,ct).call(this,0,this.itemDoms.length,e,n)}render(e){e.write("<!-- enter foreach block -->");for(let t=0;t<this.itemDoms.length;t++)this.itemDoms[t].render(e);e.write("<!-- leave foreach block -->")}bind(){var e,t;(t=(e=this.emptyDom)==null?void 0:e.bind)==null||t.call(e)}unbind(){var e,t;(t=(e=this.emptyDom)==null?void 0:e.unbind)==null||t.call(e)}destroy(){qe(this.itemDoms),this.itemDoms=null}};be=new WeakMap,H=new WeakMap,W=new WeakMap,y=new WeakSet,ct=function(e,t,n,i){let a=e+t,h;e==0&&t==this.itemDoms.length?h=this.itemDoms:h=this.itemDoms.slice(e,a);let u;if(i?u=Dt(h.map(c=>c.context.key),i):n.length>h.length?u=[{op:"insert",index:h.length,count:n.length-h.length}]:n.length<h.length?u=[{op:"delete",index:n.length,count:h.length-n.length}]:u=[],u.length==0){M(this,y,me).call(this,n,i,e,0,t);return}let v=[],f=[],p={insert:g,delete:r,store:_,restore:k},d=0;for(let c of u)c.index>d&&(M(this,y,me).call(this,n,i,e+d,d,c.index-d),d=c.index),p[c.op].call(this,c);d<n.length&&M(this,y,me).call(this,n,i,e+d,d,n.length-d),l(this,W)&&pe(f,!1),qe(f),M(this,y,Ye).call(this);function g(c){d+=c.count;let b=Math.min(f.length,c.count);b&&(l(this,ce).call(this,c.index+e,f.splice(0,b)),M(this,y,me).call(this,n,i,c.index+e,c.index,b)),b<c.count&&l(this,he).call(this,n,i,c.index+e+b,c.index+b,c.count-b)}function r(c){f.push(...l(this,ue).call(this,c.index+e,c.count))}function _(c){v.push(...l(this,ue).call(this,c.index+e,c.count))}function k(c){d+=c.count,l(this,ce).call(this,c.index+e,v.slice(c.storeIndex,c.storeIndex+c.count)),M(this,y,me).call(this,n,i,c.index+e,c.index,c.count)}},Ye=function(){if(this.itemDoms.length==0)!this.emptyDom&&this.emptyConstructor&&(this.emptyDom=this.emptyConstructor(),l(this,y,ae)&&l(this,H).before(...this.emptyDom.rootNodes),l(this,W)&&this.emptyDom.setMounted(!0)),this.emptyDom&&this.emptyDom.update();else if(this.emptyDom){if(l(this,y,ae))for(var e of this.emptyDom.rootNodes)e.remove();l(this,W)&&this.emptyDome.setMounted(!1),this.emptyDom.destroy(),this.emptyDom=null}},he=new WeakMap,ce=new WeakMap,Me=new WeakMap,ue=new WeakMap,ae=function(){var e;return((e=l(this,H))==null?void 0:e.parentNode)!=null},ut=function(e,t,n,i,a){let h=[];for(let u=0;u<a;u++){let v={outer:this.outer,model:e[i+u],key:t==null?void 0:t[i+u],index:n+u};h.push(this.itemConstructor(v))}M(this,y,Qe).call(this,n,h),l(this,W)&&pe(h,!0)},Qe=function(e,t){if(this.itemDoms.splice(e,0,...t),l(this,y,ae)){let n=[];t.forEach(a=>n.push(...a.rootNodes));let i;e+t.length<this.itemDoms.length?i=this.itemDoms[e+t.length].rootNodes[0]:i=l(this,H),i.before(...n)}},ft=function(e,t){let n=M(this,y,Xe).call(this,e,t);l(this,W)&&pe(n,!1),qe(n)},Xe=function(e,t){if(l(this,y,ae))for(let n=0;n<t;n++){let i=this.itemDoms[e+n].rootNodes;for(let a=0;a<i.length;a++)i[a].remove()}return this.itemDoms.splice(e,t)},pt=function(e,t,n,i,a){let h=[];for(let u=0;u<a;u++){let v={outer:this.outer,model:e[i+u],key:t==null?void 0:t[i+u],index:n+u};h.push(this.itemConstructor(v))}M(this,y,Ke).call(this,n,h),l(this,W)&&pe(h,!0)},Ke=function(e,t){if(this.itemDoms.splice(e,0,...t),l(this,y,ae)){let n=t.map(a=>a.rootNode),i;e+t.length<this.itemDoms.length?i=this.itemDoms[e+t.length].rootNode:i=l(this,H),i.before(...n)}},mt=function(e,t){let n=M(this,y,et).call(this,e,t);l(this,W)&&pe(n,!1),qe(n)},et=function(e,t){if(l(this,y,ae))for(let n=0;n<t;n++)this.itemDoms[e+n].rootNode.remove();return this.itemDoms.splice(e,t)},me=function(e,t,n,i,a){for(let h=0;h<a;h++){let u=this.itemDoms[n+h];u.context.key=t==null?void 0:t[i+h],u.context.index=n+h,u.context.model=e[i+h],u.rebind(),u.update()}};let Ve=Ae;function qe(o){for(let e=o.length-1;e>=0;e--)o[e].destroy()}function pe(o,e){for(let t=o.length-1;t>=0;t--)o[t].setMounted(e)}Ne.register(Ve);function lt(o){let e=function(){var n;let t=(n=C.document)==null?void 0:n.createComment(o);return{get rootNode(){return t},get rootNodes(){return[t]},get isSingleRoot(){return!0},setMounted(i){},destroy(){},update(){},render(i){i.write(`<!--${Y.encode(o)}-->`)}}};return e.isSingleRoot=!0,e}var Le,oe;const Se=class Se{constructor(e){T(this,Le);T(this,oe,!1);var t;this.isSingleRoot=e.data.isSingleRoot,this.branches=e.data.branches,this.key=e.data.key,this.branch_constructors=[],this.context=e.context;for(let n of this.branches)n.nodeIndex!==void 0?this.branch_constructors.push(e.nodes[n.nodeIndex]):this.branch_constructors.push(lt(" IfBlock placeholder "));this.activeBranchIndex=-1,this.activeKey=void 0,this.activeBranch=lt(" IfBlock placeholder ")(),this.isSingleRoot||(this.headSentinal=(t=C.document)==null?void 0:t.createComment(" if "))}static integrate(e,t){let n=[],i=e.key;delete e.key;let a=[],h=!1,u=!0;for(let v=0;v<e.branches.length;v++){let f=e.branches[v],p={};if(n.push(p),f.condition instanceof Function?(p.condition=f.condition,h=!1):f.condition!==void 0?(p.condition=()=>f.condition,h=!!f.condition):(p.condition=()=>!0,h=!0),f.template!==void 0){let d=new re(f.template,t);d.isSingleRoot||(u=!1),p.nodeIndex=a.length,a.push(d)}}return delete e.branches,h||n.push({condition:()=>!0}),{isSingleRoot:u,nodes:a,data:{key:i,branches:n,isSingleRoot:u}}}static transform(e){if(e.key!==void 0){let t=e.key;if(!(t instanceof Function))throw new Error("`key` is not a function");return delete e.key,{type:Se,key:t,branches:[{template:this.transform(e),condition:!0}]}}if(e.if!==void 0){let t={type:Se,branches:[{template:e,condition:e.if}]};return delete e.if,t}return e}static transformGroup(e){let t=null;for(let n=0;n<e.length;n++){let i=e[n];if(i.if)t={type:Se,branches:[{condition:i.if,template:i}]},delete i.if,e.splice(n,1,t);else if(i.elseif){if(!t)throw new Error("template has 'elseif' without a preceeding condition");t.branches.push({condition:i.elseif,template:i}),delete i.elseif,e.splice(n,1),n--}else if(i.else!==void 0){if(!t)throw new Error("template has 'else' without a preceeding condition");t.branches.push({condition:!0,template:i}),delete i.else,t=null,e.splice(n,1),n--}else t=null}}destroy(){this.activeBranch.destroy()}update(){this.switchActiveBranch(),this.activeBranch.update()}render(e){this.isSingleRoot||e.write("<!-- if -->"),this.activeBranch.render(e)}unbind(){var e,t;(t=(e=this.activeBranch).unbind)==null||t.call(e)}bind(){var e,t;(t=(e=this.activeBranch).bind)==null||t.call(e)}get isAttached(){var e;return this.isSingleRoot?((e=this.activeBranch.rootNode)==null?void 0:e.parentNode)!=null:this.headSentinal.parentNode!=null}switchActiveBranch(){var n,i,a,h,u;let e=this.resolveActiveBranch(),t=this.key?this.key.call(this.context.model,this.context.model,this.context):void 0;if(e!=this.activeBranchIndex||t!=this.activeKey){(n=l(this,Le))==null||n.finish();let v=this.isAttached,f=this.activeBranch;if(this.activeBranchIndex=e,this.activeKey=t,this.activeBranch=this.branch_constructors[e](),v){let p;l(this,oe)&&(this.key?p=(a=(i=this.key).withTransition)==null?void 0:a.call(i,this.context):p=(u=(h=this.branches[0].condition).withTransition)==null?void 0:u.call(h,this.context)),p||(p=dt),N(this,Le,p),p.enterNodes(this.activeBranch.rootNodes),p.leaveNodes(f.rootNodes),p.onWillEnter(()=>{this.isSingleRoot?f.rootNodes[f.rootNodes.length-1].after(this.activeBranch.rootNodes[0]):this.headSentinal.after(...this.activeBranch.rootNodes),l(this,oe)&&this.activeBranch.setMounted(!0)}),p.onDidLeave(()=>{f.rootNodes.forEach(d=>d.remove()),l(this,oe)&&f.setMounted(!1),f.destroy()}),p.start()}else l(this,oe)&&(this.activeBranch.setMounted(!0),f.setMounted(!1),f.destroy())}}resolveActiveBranch(){for(let e=0;e<this.branches.length;e++)if(this.branches[e].condition.call(this.context.model,this.context.model,this.context))return e;throw new Error("internal error, IfBlock didn't resolve to a branch")}setMounted(e){N(this,oe,e),this.activeBranch.setMounted(e)}get rootNodes(){return this.isSingleRoot?this.activeBranch.rootNodes:[this.headSentinal,...this.activeBranch.rootNodes]}get rootNode(){return this.activeBranch.rootNode}};Le=new WeakMap,oe=new WeakMap;let tt=Se;Ne.register(tt);function Ft(o,e){let t=1,n=1,i=[],a=null,h=new re(o,e),u=new Map;return{code:f(h,!0).toString(),isSingleRoot:h.isSingleRoot,refs:i};function f(p,d){let g={emit_text_node:Z,emit_html_node:ke,emit_dynamic_text_node:xe,emit_comment_node:De,emit_fragment_node:x,emit_element_node:S,emit_integrated_node:Oe,emit_component_node:We},r=new it;r.create=r.addFunction("create").code,r.bind=r.addFunction("bind").code,r.update=r.addFunction("update").code,r.unbind=r.addFunction("unbind").code,r.setMounted=r.addFunction("setMounted",["mounted"]).code,r.destroy=r.addFunction("destroy").code;let _;d&&(_=r.addFunction("rebind").code);let k=new Map;d&&(a=r,a.code.append("let model = context.model;"),a.code.append("let document = env.document;")),r.code.append("create();"),r.code.append("bind();"),r.code.append("update();"),z(p),r.bind.closure.isEmpty||(r.create.append("bind();"),r.destroy.closure.addProlog().append("unbind();"));let c=[];return p.isSingleRoot&&c.push(`  get rootNode() { return ${p.spreadDomNodes()}; },`),d?(c.push("  context,"),p==h&&u.forEach((s,m)=>c.push(`  get ${m}() { return ${s}; },`)),r.getFunction("bind").isEmpty?_.append("model = context.model"):(_.append("if (model != context.model)"),_.braced(()=>{_.append("unbind();"),_.append("model = context.model"),_.append("bind();")})),c.push("  rebind,")):(c.push("  bind,"),c.push("  unbind,")),r.code.append(["return { ","  update,","  destroy,","  setMounted,",`  get rootNodes() { return [ ${p.spreadDomNodes()} ]; },`,`  isSingleRoot: ${p.isSingleRoot},`,...c,"};"]),r;function b(s){s.template.export?a.addLocal(s.name):r.addLocal(s.name)}function I(){r.update.temp_declared||(r.update.temp_declared=!0,r.update.append("let temp;"))}function z(s){s.name=`n${t++}`,g[`emit_${s.kind}_node`](s)}function Z(s){b(s),r.create.append(`${s.name} = document.createTextNode(${JSON.stringify(s.template)});`)}function ke(s){s.nodes.length!=0&&(b(s),s.nodes.length==1?(r.create.append(`${s.name} = refs[${i.length}].cloneNode(true);`),i.push(s.nodes[0])):(r.create.append(`${s.name} = refs[${i.length}].map(x => x.cloneNode(true));`),i.push(s.nodes)))}function xe(s){b(s);let m=`p${n++}`;r.addLocal(m),r.create.append(`${s.name} = helpers.createTextNode("");`),I(),r.update.append(`temp = ${Q(i.length)};`),r.update.append(`if (temp !== ${m})`),r.update.append(`  ${s.name} = helpers.setNodeText(${s.name}, ${m} = ${Q(i.length)});`),i.push(s.template)}function De(s){if(b(s),s.template.text instanceof Function){let m=`p${n++}`;r.addLocal(m),r.create.append(`${s.name} = document.createComment("");`),I(),r.update.append(`temp = ${Q(i.length)};`),r.update.append(`if (temp !== ${m})`),r.update.append(`  ${s.name}.nodeValue = ${m} = temp;`),i.push(s.template.text)}else r.create.append(`${s.name} = document.createComment(${JSON.stringify(s.template.text)});`)}function Oe(s){let m=[],E=!1;if(s.integrated.nodes)for(let $=0;$<s.integrated.nodes.length;$++){let q=s.integrated.nodes[$];if(!q){m.push(null);continue}q.name=`n${t++}`;let w=f(q,!1);w.getFunction("bind").isEmpty||(E=!0);let fe=`${q.name}_constructor_${$+1}`,$t=r.addFunction(fe,[]);w.appendTo($t.code),m.push(fe)}r.update.append(`${s.name}.update()`),E&&(r.bind.append(`${s.name}.bind()`),r.unbind.append(`${s.name}.unbind()`));let L=-1;s.integrated.data&&(L=i.length,i.push(s.integrated.data)),b(s),r.create.append(`${s.name} = new refs[${i.length}]({`,"  context,",`  data: ${s.integrated.data?`refs[${L}]`:"null"},`,`  nodes: [ ${m.join(", ")} ],`,"});"),i.push(s.template.type),r.setMounted.append(`${s.name}.setMounted(mounted);`),r.destroy.append(`${s.name}?.destroy();`),r.destroy.append(`${s.name} = null;`);for(let $ of Object.keys(s.template))if(!F(s,$))throw new Error(`Unknown element template key: ${$}`)}function We(s){b(s),r.create.append(`${s.name} = new refs[${i.length}]();`),i.push(s.template.type);let m=new Set(s.template.type.slots??[]),E=s.template.update==="auto",L=!1;r.setMounted.append(`${s.name}.setMounted(mounted);`),r.destroy.append(`${s.name}?.destroy();`),r.destroy.append(`${s.name} = null;`);for(let $ of Object.keys(s.template)){if(F(s,$)||$=="update")continue;if(m.has($)){if(s.template[$]===void 0)continue;let w=new re(s.template[$],e);z(w),w.isSingleRoot?r.create.append(`${s.name}${le($)}.content = ${w.name};`):r.create.append(`${s.name}${le($)}.content = [${w.spreadDomNodes()}];`);continue}let q=typeof s.template[$];if(q=="string"||q=="number"||q=="boolean")r.create.append(`${s.name}${le($)} = ${JSON.stringify(s.template[$])}`);else if(q==="function"){E&&!L&&(L=`${s.name}_mod`,r.update.append(`let ${L} = false;`));let w=`p${n++}`;r.addLocal(w);let X=i.length;I(),r.update.append(`temp = ${Q(X)};`),r.update.append(`if (temp !== ${w})`),E&&(r.update.append("{"),r.update.append(`  ${L} = true;`)),r.update.append(`  ${s.name}${le($)} = ${w} = temp;`),E&&r.update.append("}"),i.push(s.template[$])}else{let w=s.template[$];w instanceof Tt&&(w=w.value),r.create.append(`${s.name}${le($)} = refs[${i.length}];`),i.push(w)}}s.template.update&&(typeof s.template.update=="function"?(r.update.append(`if (${Q(i.length)})`),r.update.append(`  ${s.name}.update();`),i.push(s.template.update)):E?L&&(r.update.append(`if (${L})`),r.update.append(`  ${s.name}.update();`)):r.update.append(`${s.name}.update();`))}function x(s){D(s)}function S(s){var L;let m=r.current_xmlns,E=s.template.xmlns;E===void 0&&s.template.type=="svg"&&(E="http://www.w3.org/2000/svg"),E==null&&(E=r.current_xmlns),b(s),E?(r.current_xmlns=E,r.create.append(`${s.name} = document.createElementNS(${JSON.stringify(E)}, ${JSON.stringify(s.template.type)});`)):r.create.append(`${s.name} = document.createElement(${JSON.stringify(s.template.type)});`),r.destroy.append(`${s.name} = null;`);for(let $ of Object.keys(s.template)){if(F(s,$))continue;if($.startsWith("class_")){let w=je($.substring(6)),X=s.template[$];if(X instanceof Function){let fe=`${s.name}_bc`;r.addLocal(fe),r.create.append(`${fe} = helpers.boolClassMgr(context, ${s.name}, ${JSON.stringify(w)}, refs[${i.length}]);`),i.push(X),r.update.append(`${fe}();`)}else r.create.append(`helpers.setNodeClass(${s.name}, ${JSON.stringify(w)}, ${X});`);continue}if($.startsWith("style_")){let w=je($.substring(6));Ze(s.template[$],X=>`helpers.setNodeStyle(${s.name}, ${JSON.stringify(w)}, ${X})`);continue}if($=="display"){if(s.template.display instanceof Function){let w=`${s.name}_dm`;r.addLocal(w),r.create.append(`${w} = helpers.displayMgr(context, ${s.name}, refs[${i.length}]);`),i.push(s.template.display),r.update.append(`${w}();`)}else r.create.append(`helpers.setNodeDisplay(${s.name}, ${JSON.stringify(s.template.display)});`);continue}if($=="text"){s.template.text instanceof Function?Ze(s.template.text,w=>`helpers.setElementText(${s.name}, ${w})`):s.template.text instanceof B&&r.create.append(`${s.name}.innerHTML = ${JSON.stringify(s.template.text.html)};`),typeof s.template.text=="string"&&r.create.append(`${s.name}.innerText = ${JSON.stringify(s.template.text)};`);continue}let q=$;$.startsWith("attr_")&&(q=q.substring(5)),r.current_xmlns||(q=je(q)),Ze(s.template[$],w=>`helpers.setElementAttribute(${s.name}, ${JSON.stringify(q)}, ${w})`)}D(s),(L=s.childNodes)!=null&&L.length&&r.create.append(`${s.name}.append(${s.spreadChildDomNodes()});`),r.current_xmlns=m}function D(s){if(s.childNodes)for(let m=0;m<s.childNodes.length;m++)z(s.childNodes[m])}function F(s,m){if(P(m))return!0;if(m=="export"){if(typeof s.template.export!="string")throw new Error("'export' must be a string");if(u.has(s.template.export))throw new Error(`duplicate export name '${s.template.export}'`);return u.set(s.template.export,s.name),!0}if(m=="bind"){if(typeof s.template.bind!="string")throw new Error("'bind' must be a string");if(k.has(s.template.export))throw new Error(`duplicate bind name '${s.template.bind}'`);return k.set(s.template.bind,!0),r.bind.append(`model${le(s.template.bind)} = ${s.name};`),r.unbind.append(`model${le(s.template.bind)} = null;`),!0}if(m.startsWith("on_")){let E=m.substring(3);if(!(s.template[m]instanceof Function))throw new Error(`event handler for '${m}' is not a function`);s.listenerCount||(s.listenerCount=0),s.listenerCount++;let L=`${s.name}_ev${s.listenerCount}`;return r.addLocal(L),r.create.append(`${L} = helpers.addEventListener(() => model, ${s.name}, ${JSON.stringify(E)}, refs[${i.length}]);`),i.push(s.template[m]),r.destroy.append(`${L}?.();`),r.destroy.append(`${L} = null;`),!0}return m=="debug_create"?(typeof s.template[m]=="function"?(r.create.append(`if (${Q(i.length)})`),r.create.append("  debugger;"),i.push(s.template[m])):s.template[m]&&r.create.append("debugger;"),!0):m=="debug_update"?(typeof s.template[m]=="function"?(r.update.append(`if (${Q(i.length)})`),r.update.append("  debugger;"),i.push(s.template[m])):s.template[m]&&r.update.append("debugger;"),!0):m=="debug_render"}function P(s){return s=="type"||s=="childNodes"||s=="xmlns"}function Q(s){return`refs[${s}].call(model, model, context)`}function Ze(s,m){if(s instanceof Function){let E=`p${n++}`;r.addLocal(E),m(),I(),r.update.append(`temp = ${Q(i.length)};`),r.update.append(`if (temp !== ${E})`),r.update.append(`  ${m(E+" = temp")};`),i.push(s)}else r.create.append(m(JSON.stringify(s)))}}}let Bt=1;function gt(o,e){e=e??{},e.compileTemplate=gt;let t=Ft(o,e),n=new Function("env","refs","helpers","context",t.code),i=function(a){return a||(a={}),a.$instanceId=Bt++,n(C,t.refs,K,a??{})};return i.isSingleRoot=t.isSingleRoot,i}class qt extends Nt{constructor(){super(),this.browser=!0,this.document=document,this.compileTemplate=gt,this.window=window,this.requestAnimationFrame=window.requestAnimationFrame.bind(window),this.Node=Node}}typeof document<"u"&&xt(new qt);const yt={science:"M200-120q-51 0-72.5-45.5T138-250l222-270v-240h-40q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760h-40v240l222 270q32 39 10.5 84.5T760-120H200Zm0-80h560L520-492v-268h-80v268L200-200Zm280-280Z",scissors:"M760-120 480-400l-94 94q8 15 11 32t3 34q0 66-47 113T240-80q-66 0-113-47T80-240q0-66 47-113t113-47q17 0 34 3t32 11l94-94-94-94q-15 8-32 11t-34 3q-66 0-113-47T80-720q0-66 47-113t113-47q66 0 113 47t47 113q0 17-3 34t-11 32l494 494v40H760ZM600-520l-80-80 240-240h120v40L600-520ZM240-640q33 0 56.5-23.5T320-720q0-33-23.5-56.5T240-800q-33 0-56.5 23.5T160-720q0 33 23.5 56.5T240-640Zm240 180q8 0 14-6t6-14q0-8-6-14t-14-6q-8 0-14 6t-6 14q0 8 6 14t14 6ZM240-160q33 0 56.5-23.5T320-240q0-33-23.5-56.5T240-320q-33 0-56.5 23.5T160-240q0 33 23.5 56.5T240-160Z"};function Ht(o,e,t){t=t??1;let n=(t-1)*960;return`<svg xmlns=http://www.w3.org/2000/svg" height="${e??32}px" width="${e??32}" viewBox="${n} ${-960+n} ${960-n*2} ${960-n*2}"><path d="${yt[o]}"/></svg>`}function Rt(o,e,t){t=t??1;let n=(t-1)*960;return{type:"svg",attr_width:e,attr_height:e,attr_viewBox:`${n} ${-960+n} ${960-n*2} ${960-n*2}`,attr_preserveAspectRatio:"xMidYMid slice",attr_role:"img",$:{type:"path",attr_d:yt[o]}}}class It extends Ie{constructor(){super(...arguments);j(this,"loggedIn",!1)}onMount(){stylish.addEventListener("darkModeChanged",this.invalidate)}onUnmount(){stylish.removeEventListener("darkModeChanged",this.invalidate)}}j(It,"template",{type:"header",id:"header",$:[{type:"a",class:"title",attr_href:"/",$:[{type:"img",class:"hide-sm",attr_src:t=>`/codeonly-logo-${stylish.darkMode?"dark":"light"}.svg`},{type:"img",class:"hide-lg",attr_src:t=>"/codeonly-icon.svg"}]},{type:"div",class:"buttons",$:[{if:t=>t.loggedIn,type:"a",class:"subtle button",attr_href:"/guide/",text:"Docs"},{if:t=>t.loggedIn,type:"a",class:"subtle button labLink vcenter",attr_href:"/lab",$:[Rt("science",19)," The Lab"]},{type:"input",attr_type:"checkbox",attr_checked:window.stylish.darkMode?"checked":void 0,class:"theme-switch",on_click:()=>window.stylish.toggleTheme()}]}]});at.declare(`
:root
{
    --header-height: 50px;
}

#header
{
    position: fixed;
    top: 0;
    width: 100%;
    height: var(--header-height);

    display: flex;
    justify-content: start;
    align-items: center;
    border-bottom: 1px solid var(--gridline-color);
    padding-left: 10px;
    padding-right: 10px;
    background-color: rgb(from var(--back-color) r g b / 50%);
    z-index: 1;

    .title 
    {
        flex-grow: 1;
        display: flex;
        align-items: center;
        color: var(--body-fore-color);
        transition: opacity 0.2s;

        &:hover
        {
            opacity: 75%;
        }

        img
        {
            height: calc(var(--header-height) - 25px);
            padding-right: 10px
        }
    }


    .buttons
    {
        font-size: 12pt;
        display: flex;
        gap: 10px;
        align-items: center;

        .theme-switch
        {
            transform: translateY(-1.5px);
        }
    }

    .lablink
    {
        svg 
        { 
            transform: translateY(-1px) scale(1.1);
            margin-right: 2px;
        };
    }

    .hide-lg
    {
        display: none;
    }
}

@media screen and (width < 550px) 
{
    #header
    {
        .hide-lg
        {
            display: block;
        }
        .hide-sm
        {
            display: none;
        }
    }
}

`);let Pt=[{title:"Tool Free",body:`No transpiling, packaging or bundling to slow things down. 
               Debug your code in the browser <em>exactly</em> 
               as you wrote it.`},{title:"Build Anything",body:`Tiny web widgets, single page apps or full-stack setups. 
             All in plain, clean and modern ES6 JavaScript.`},{title:"Fast and Small",body:`DOM templates are JIT compiled and produce minimal DOM updates and we've 
               tuned it to run <em>fast!</em>.  ~14kB gzipped.`}],zt=`### Logic, Templates and Styles...

...all in self contained .js files.

\`\`\`js
// demo code lab
class Main extends Component /* i: Components extend the \`Component\` class */
{
  count = 0; /* i: Class fields and functions are available to the template */

  onClick() /* i: Button click event handler */
  { 
    this.count++; 
    this.invalidate(); /* i: Marks the component as needing DOM update */
  }

  static template = { /* i: This is the component's DOM template */
    type: "div", /* i: Root element type */
    class: "counter", /* i: Scoping CSS class */
    $: [ /* i: Child nodes array */
      {
        type: "button",
        text: \`Click Me\`,
        on_click: c => c.onClick(), /* i: \`c\` is the component instance */
      },
      {
        type: "span",
        text: c => \`Count: \${c.count}\`, /* i: Callback for dynamic content */
      }
    ]
  }
}

Style.declare( /* i: CSS styles (with \`.counter\` as scoping class) */
\`
.counter
{
  text-align: center;
  button
  {
    margin-right: 10px
  }
}
\`); 
\`\`\`

[Read the Guide](/guide/)

`;class At extends Ie{onMount(){stylish.addEventListener("darkModeChanged",this.invalidate),document.documentElement.classList.add("home-colors")}onUnmount(){stylish.removeEventListener("darkModeChanged",this.invalidate),document.documentElement.classList.remove("home-colors")}}j(At,"template",{type:"main",class:"hero",$:[{type:"img",id:"hero",attr_src:e=>`/hero-${stylish.darkMode?"dark":"light"}.svg`},{type:"h2",text:"The front-end Web framework for coders."},{type:"div",class:"row",$:Pt.map(e=>Jt(e))}]});function Jt(o){return{type:"div",class:"box",$:[Y.h(3,o.title),Y.p(Y.raw(o.body))]}}at.declare(`
main.hero
{
    text-align: center;
    position: relative;
    max-width: 960px;
    margin: 50px auto 20px auto;
    padding: 10px 40px;

    #hero
    {
        width: 100%;
        max-width: 800px;
        min-width: 300px;
        margin-top: -100px;
        margin-bottom: -10%;
        aspect-ratio: 3179 / 1611;
    }
    h2
    {
        margin: 0;
        font-size: 1.2rem;
    }

    .row
    {
        display: flex;
        gap: 10px;
        margin-top: 40px;

        .box
        {
            cursor: default;
            border: 1px solid var(--gridline-color);
            border-radius: 7px;
            width: 33%;
            font-size: 10pt;
            padding: 10px;
            color: var(--body-fore-color);
            transition: background-color 0.2s;
            margin: 5px 0;

            &:hover
            {
                background-color: rgb(from var(--accent-color) r g b / 10%);
            }

            h3
            {
                margin-top: 10px;
                font-size: 1rem;
                color: var(--accent-color);
            }
        }
    }

}

@media screen and (width < 550px) 
{
    main.hero
    {
        padding: 10px 20px;
        .row
        {
            display: block;
            text-align: center;
            .box
            {
                width: 100%;
                display: block;
                margin: 10px 0;
            }
        }
        h2
        {
            margin: 0;
            font-size: 1.0rem;
        }
    }
}

`);export{Ie as C,Y as H,at as S,zt as a,At as b,It as c,C as e,Ht as h,St as n,Wt as t,Zt as w};
