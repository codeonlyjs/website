var Et=Object.defineProperty;var it=l=>{throw TypeError(l)};var Lt=(l,e,t)=>e in l?Et(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var z=(l,e,t)=>Lt(l,typeof e!="symbol"?e+"":e,t),Pe=(l,e,t)=>e.has(l)||it("Cannot "+t);var r=(l,e,t)=>(Pe(l,e,"read from private field"),t?t.call(l):e.get(l)),v=(l,e,t)=>e.has(l)?it("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,t),p=(l,e,t,i)=>(Pe(l,e,"write to private field"),i?i.call(l,t):e.set(l,t),t),S=(l,e,t)=>(Pe(l,e,"access private method"),t);var fe=(l,e,t,i)=>({set _(n){p(l,e,n,t)},get _(){return r(l,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();let b=null;var Z;class Tt extends EventTarget{constructor(){super();v(this,Z,0);this.browser=!1}enterLoading(){fe(this,Z)._++,r(this,Z)==1&&this.dispatchEvent(new Event("loading"))}leaveLoading(){fe(this,Z)._--,r(this,Z)==0&&this.dispatchEvent(new Event("loaded"))}get loading(){return r(this,Z)!=0}async load(t){this.enterLoading();try{return await t()}finally{this.leaveLoading()}}}Z=new WeakMap;function Ct(l){b=l}class U{constructor(e){this.html=e}}class Mt{constructor(e){this.value=e}}let nt=[],ke=[],Se=null;class Dt{static declare(e){nt.push(e),ke.push(e),b.browser&&b.requestAnimationFrame(kt)}static get all(){return nt.join(`
`)}}function kt(){ke.length!=0&&(Se==null&&(Se=document.createElement("style")),Se.innerHTML+=ke.join(`
`),ke=[],Se.parentNode||document.head.appendChild(Se))}let Ce=[],Ve=!1;function lt(l,e){l&&(e=e??0,e!=0&&(Ve=!0),Ce.push({callback:l,order:e}),Ce.length==1&&b.requestAnimationFrame(function(){let t=Ce;Ve&&(t.sort((i,n)=>n.order-i.order),Ve=!1),Ce=[];for(let i=t.length-1;i>=0;i--)t[i].callback()}))}class It{static compile(){return b.compileTemplate(...arguments)}}var D,G,Be;const W=class W extends EventTarget{constructor(){super();v(this,D);v(this,G,0);v(this,Be,!1);this.update=this.update.bind(this),this.invalidate=this.invalidate.bind(this)}static get compiledTemplate(){return this._compiledTemplate||(this._compiledTemplate=this.compileTemplate()),this._compiledTemplate}static compileTemplate(){return It.compile(this.template)}static get isSingleRoot(){return this.compiledTemplate.isSingleRoot}init(){r(this,D)||p(this,D,new this.constructor.compiledTemplate({model:this}))}get dom(){return r(this,D)||this.init(),r(this,D)}get isSingleRoot(){return this.dom.isSingleRoot}get rootNode(){if(!this.isSingleRoot)throw new Error("rootNode property can't be used on multi-root template");return this.dom.rootNode}get rootNodes(){return this.dom.rootNodes}invalidate(){r(this,D)&&(this.invalid||(this.invalid=!0,W.invalidate(this)))}validate(){this.invalid&&this.update()}static invalidate(t){this._invalidComponents.push(t),this._invalidComponents.length==1&&lt(()=>{for(let i=0;i<this._invalidComponents.length;i++)this._invalidComponents[i].validate();this._invalidComponents=[]},W.nextFrameOrder)}update(){r(this,D)&&(this.invalid=!1,this.dom.update())}async load(t){fe(this,G)._++,r(this,G)==1&&(this.invalidate(),b.enterLoading(),this.dispatchEvent(new Event("loading")));try{return await t()}finally{fe(this,G)._--,r(this,G)==0&&(this.invalidate(),this.dispatchEvent(new Event("loaded")),b.leaveLoading())}}get loading(){return r(this,G)!=0}set loading(t){throw new Error("setting Component.loading not supported, use load() function")}render(t){this.dom.render(t)}destroy(){r(this,D)&&(r(this,D).destroy(),p(this,D,null))}onMount(){}onUnmount(){}setMounted(t){var i;(i=r(this,D))==null||i.setMounted(t),p(this,Be,t),t?this.onMount():this.onUnmount()}mount(t){return typeof t=="string"&&(t=document.querySelector(t)),t.append(...this.rootNodes),this.setMounted(!0),this}unmount(){r(this,D)&&this.rootNodes.forEach(t=>t.remove()),this.setMounted(!1)}};D=new WeakMap,G=new WeakMap,Be=new WeakMap,z(W,"_compiledTemplate"),z(W,"nextFrameOrder",-100),z(W,"_invalidComponents",[]),z(W,"template",{});let Re=W;function Ft(l){let e="^",t=l.length,i;for(let o=0;o<t;o++){i=!0;let d=l[o];if(d=="?")e+="[^\\/]";else if(d=="*")e+="[^\\/]+";else if(d==":"){o++;let h=o;for(;o<t&&n(l[o]);)o++;let f=l.substring(h,o);if(f.length==0)throw new Error("syntax error in url pattern: expected id after ':'");let m="[^\\/]+";if(l[o]=="("){o++,h=o;let w=0;for(;o<t;){if(l[o]=="(")w++;else if(l[o]==")"){if(w==0)break;w--}o++}if(o>=t)throw new Error("syntax error in url pattern: expected ')'");m=l.substring(h,o),o++}if(o<t&&l[o]=="*"||l[o]=="+"){let w=l[o];o++,l[o]=="/"?(e+=`(?<${f}>(?:${m}\\/)${w})`,o++):w=="*"?e+=`(?<${f}>(?:${m}\\/)*(?:${m})?\\/?)`:e+=`(?<${f}>(?:${m}\\/)*(?:${m})\\/?)`,i=!1}else e+=`(?<${f}>${m})`;o--}else d=="/"?(e+="\\"+d,o==l.length-1&&(e+="?")):".$^{}[]()|*+?\\/".indexOf(d)>=0?(e+="\\"+d,i=d!="/"):e+=d}return i&&(e+="\\/?"),e+="$",e;function n(o){return o>="a"&&o<="z"||o>="A"&&o<="Z"||o>="0"&&o<="9"||o=="_"||o=="$"}}function Ie(l){return l==null?"":(""+l).replace(/["'&<>]/g,function(e){switch(e){case'"':return"&quot;";case"&":return"&amp;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;"}})}function je(l){return l.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Ue(l){return l instanceof Function&&!!l.prototype&&!!l.prototype.constructor}let Rt=/^[a-zA-Z$][a-zA-Z0-9_$]*$/;function ie(l){return l.match(Rt)?`.${l}`:`[${JSON.stringify(l)}]`}function Bt(l,e){l.loading?l.addEventListener("loaded",e,{once:!0}):e()}class st{static get(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}}static set(e){e?window.scrollTo(e.left,e.top):window.scrollTo(0,0)}}var Ee,F,R,re,ye,be;class Ot{constructor(e,t){v(this,Ee);z(this,"urlMapper");v(this,F,null);v(this,R,null);v(this,re,[]);v(this,ye,[]);v(this,be,!1);p(this,Ee,e),e&&(this.navigate=e.navigate.bind(e),this.replace=e.replace.bind(e),this.back=e.back.bind(e)),t&&this.register(t)}start(){return r(this,Ee).start(this)}internalize(e){var t;return((t=this.urlMapper)==null?void 0:t.internalize(e))??new URL(e)}externalize(e){var t;return((t=this.urlMapper)==null?void 0:t.externalize(e))??new URL(e)}get current(){return r(this,F)}get pending(){return r(this,R)}addEventListener(e,t){r(this,re).push({event:e,handler:t})}removeEventListener(e,t){let i=r(this,re).findIndex(n=>n.event==e&&n.handler==t);i>=0&&r(this,re).splice(i,1)}async dispatchEvent(e,t,i,n){for(let o of r(this,re))if(o.event==e){let d=o.handler(i,n);if(t&&await Promise.resolve(d)==!1)return!1}return!0}async load(e,t,i){var o,d,h;i=i??{};let n=r(this,F);if(((o=r(this,F))==null?void 0:o.url.pathname)==e.pathname&&r(this,F).url.search==e.search){let f=(h=(d=r(this,F).handler).hashChange)==null?void 0:h.call(d,r(this,F),i);f!==void 0?i=f:i=Object.assign({},r(this,F),i)}if(i=Object.assign(i,{current:!1,url:e,pathname:e.pathname,state:t}),p(this,R,i),!i.match&&(i=await this.matchUrl(e,t,i),!i))return null;try{await this.tryLoad(i)!==!0&&p(this,R,null)}catch(f){throw this.dispatchCancelEvents(n,i),f}return r(this,R)!=i?(this.dispatchCancelEvents(n,i),null):(p(this,R,null),i)}dispatchCancelEvents(e,t){var i,n,o,d,h;(o=(i=r(this,F))==null?void 0:(n=i.handler).cancelLeave)==null||o.call(n,e,t),(h=(d=t.handler).cancelEnter)==null||h.call(d,e,t),this.dispatchEvent("cancel",!1,e,t)}async tryLoad(e){var n,o,d,h,f,m,w,u;let t=r(this,F),i;if(!(t&&(!await this.dispatchEvent("mayLeave",!0,t,e)||e!=r(this,R)||(i=(o=(n=t.handler).mayLeave)==null?void 0:o.call(n,t,e),await Promise.resolve(i)===!1)||e!=r(this,R)))&&(i=(h=(d=e.handler).mayEnter)==null?void 0:h.call(d,t,e),await Promise.resolve(i)!==!1&&e==r(this,R)&&await this.dispatchEvent("mayEnter",!0,t,e)&&e==r(this,R)))return t&&(t.current=!1),e.current=!0,p(this,F,e),t&&(this.dispatchEvent("didLeave",!1,t,e),(m=t==null?void 0:(f=t.handler).didLeave)==null||m.call(f,t,e)),(u=(w=e.handler).didEnter)==null||u.call(w,t,e),this.dispatchEvent("didEnter",!1,t,e),!0}async matchUrl(e,t,i){r(this,be)&&(r(this,ye).sort((n,o)=>(n.order??0)-(o.order??0)),p(this,be,!1));for(let n of r(this,ye)){if(n.pattern&&(i.match=i.pathname.match(n.pattern),!i.match))continue;let o=await Promise.resolve(n.match(i));if(o===!0||o==i)return i.handler=n,i;if(o===null)return null}return i.handler={},i}register(e){Array.isArray(e)||(e=[e]);for(let t of e)typeof t.pattern=="string"&&(t.pattern=new RegExp(Ft(t.pattern))),r(this,ye).push(t);p(this,be,!0)}}Ee=new WeakMap,F=new WeakMap,R=new WeakMap,re=new WeakMap,ye=new WeakMap,be=new WeakMap;var we,M,$e;class qt{constructor(){v(this,we,0);v(this,M);v(this,$e,!1)}async start(e){p(this,M,e),b.document.body.addEventListener("click",o=>{if(o.defaultPrevented)return;let d=o.target.closest("a");if(d){if(d.hasAttribute("download"))return;let h=d.getAttribute("href"),f=new URL(h,b.window.location);if(f.origin==b.window.location.origin){try{f=r(this,M).internalize(f)}catch{return}return this.navigate(f).then(m=>{m==null&&(window.location.href=h)}),o.preventDefault(),!0}}}),b.window.addEventListener("popstate",async o=>{if(r(this,$e)){p(this,$e,!1);return}let d=r(this,we)+1,h=r(this,M).internalize(b.window.location),f=o.state??{sequence:this.current.state.sequence+1};await this.load(h,f,{navMode:"pop"})||d==r(this,we)&&(p(this,$e,!0),b.window.history.go(this.current.state.sequence-f.sequence))});let t=r(this,M).internalize(b.window.location),i=b.window.history.state??{sequence:0},n=await this.load(t,i,{navMode:"start"});return b.window.history.replaceState(i,null),n}get current(){return r(this,M).current}async load(e,t,i){return fe(this,we)._++,await r(this,M).load(e,t,i)}back(){if(this.current.state.sequence==0){let e=new URL("/",r(this,M).internalize(b.window.location)),t={sequence:0};b.window.history.replaceState(t,"",r(this,M).externalize(e)),this.load(e,t,{navMode:"replace"})}else b.window.history.back()}replace(e){typeof e=="string"&&(e=new URL(e,r(this,M).internalize(b.window.location))),this.current.pathname=e.pathname,this.current.url=e,b.window.history.replaceState(this.current.state,"",r(this,M).externalize(e).href)}async navigate(e){typeof e=="string"&&(e=new URL(e,r(this,M).internalize(b.window.location)));let t=await this.load(e,{sequence:this.current.state.sequence+1},{navMode:"push"});return t&&(b.window.history.pushState(t.state,"",r(this,M).externalize(e)),t)}}we=new WeakMap,M=new WeakMap,$e=new WeakMap;var J,O;class Pt{constructor(e){v(this,J);v(this,O,{});p(this,J,e),b.window.history.scrollRestoration&&(b.window.history.scrollRestoration="manual");let t=b.window.sessionStorage.getItem("codeonly-view-states");t&&p(this,O,JSON.parse(t)),e.addEventListener("mayLeave",(i,n)=>(this.captureViewState(),!0)),e.addEventListener("mayEnter",(i,n)=>{n.viewState=r(this,O)[n.state.sequence]}),e.addEventListener("didEnter",(i,n)=>{if(n.navMode=="push"){for(let o of Object.keys(r(this,O)))parseInt(o)>n.state.sequence&&delete r(this,O)[o];this.saveViewStates()}Bt(b,()=>{lt(()=>{var o,d;if(n.handler.restoreViewState?n.handler.restoreViewState(n.viewState,n):r(this,J).restoreViewState?(d=(o=r(this,J)).restoreViewState)==null||d.call(o,n.viewState,n):st.set(n.viewState),b.browser){let h=document.getElementById(n.url.hash.substring(1));h==null||h.scrollIntoView()}})})}),b.window.addEventListener("beforeunload",i=>{this.captureViewState()})}captureViewState(){var t,i;let e=r(this,J).current;e&&(e.handler.captureViewState?r(this,O)[e.state.sequence]=e.handler.captureViewState(e):r(this,J).captureViewState?r(this,O)[e.state.sequence]=(i=(t=r(this,J)).captureViewState)==null?void 0:i.call(t,e):r(this,O)[e.state.sequence]=st.get()),this.saveViewStates()}saveViewStates(){b.window.sessionStorage.setItem("codeonly-view-states",JSON.stringify(r(this,O)))}}J=new WeakMap,O=new WeakMap;function Me(){let l=[],e="";function t(...m){for(let w=0;w<m.length;w++){let u=m[w];u.lines?l.push(...u.lines.map(N=>e+N)):Array.isArray(u)?l.push(...u.filter(N=>N!=null).map(N=>e+N)):l.push(...u.split(`
`).map(N=>e+N))}}function i(){e+="  "}function n(){e=e.substring(2)}function o(){return l.join(`
`)+`
`}function d(m){t("{"),i(),m(this),n(),t("}")}function h(...m){let w={pos:this.lines.length};return this.append(m),w.headerLineCount=this.lines.length-w.pos,w}function f(m,...w){this.lines.length==m.pos+m.headerLineCount?this.lines.splice(m.pos,m.headerLineCount):this.append(w)}return{append:t,enterCollapsibleBlock:h,leaveCollapsibleBlock:f,indent:i,unindent:n,braced:d,toString:o,lines:l,get isEmpty(){return l.length==0}}}class Qe{constructor(){this.code=Me(),this.code.closure=this,this.functions=[],this.locals=[],this.prologs=[],this.epilogs=[]}get isEmpty(){return this.code.isEmpty&&this.locals.length==0&&this.functions.every(e=>e.code.isEmpty)&&this.prologs.every(e=>e.isEmpty)&&this.epilogs.every(e=>e.isEmpty)}addProlog(){let e=Me();return this.prologs.push(e),e}addEpilog(){let e=Me();return this.epilogs.push(e),e}addLocal(e,t){this.locals.push({name:e,init:t})}addFunction(e,t){t||(t=[]);let i={name:e,args:t,code:new Qe};return this.functions.push(i),i.code}getFunction(e){var t;return(t=this.functions.find(i=>i.name==e))==null?void 0:t.code}toString(){let e=Me();return this.appendTo(e),e.toString()}appendTo(e){this.locals.length>0&&e.append(`let ${this.locals.map(t=>t.init?`${t.name} = ${t.init}`:t.name).join(", ")};`);for(let t of this.prologs)e.append(t);e.append(this.code);for(let t of this.functions)e.append(`function ${t.name}(${t.args.join(", ")})`),e.append("{"),e.indent(),t.code.appendTo(e),e.unindent(),e.append("}");for(let t of this.epilogs)e.append(t)}}class at{static rawText(e){return e instanceof U?e.html:Ie(e)}static renderToString(e){let t="";return e({write:function(i){t+=i}}),t}static renderComponentToString(e){let t="";return e.render({write:function(i){t+=i}}),t}static rawStyle(e){let t;return e instanceof U?t=e.html:t=Ie(e),t=t.trim(),t.endsWith(";")||(t+=";"),t}static rawNamedStyle(e,t){if(!t)return"";let i;return t instanceof U?i=t.html:i=Ie(t),i=i.trim(),i+=";",`${e}:${i}`}static createTextNode(e){if(e instanceof U){let t=document.createElement("SPAN");return t.innerHTML=e.html,t}else return document.createTextNode(e)}static setElementAttribute(e,t,i){i===void 0?e.removeAttribute(t):e.setAttribute(t,i)}static setElementText(e,t){t instanceof U?e.innerHTML=t.html:e.innerText=t}static setNodeText(e,t){if(t instanceof U){if(e.nodeType==1)return e.innerHTML=t.html,e;let i=document.createElement("SPAN");return i.innerHTML=t.html,e.replaceWith(i),i}else{if(e.nodeType==3)return e.nodeValue=t,e;let i=document.createTextNode(t);return e.replaceWith(i),i}}static setNodeClass(e,t,i){i?e.classList.add(t):e.classList.remove(t)}static setNodeStyle(e,t,i){i==null?e.style.removeProperty(t):e.style[t]=i}static setNodeDisplay(e,t,i){if(t===!0){i===null?e.style.removeProperty("display"):i!==void 0&&e.style.display!=i&&(e.style.display=i);return}else if(t===!1||t===null||t===void 0){let n=e.style.display;return e.style.display!="none"&&(e.style.display="none"),n??null}else if(typeof t=="string"){let n=e.style.display;return e.style.display!=t&&(e.style.display=t),n??null}}static replaceMany(e,t){var i;if((i=e==null?void 0:e[0])!=null&&i.parentNode){e[0].replaceWith(...t);for(let n=1;n<e.length;n++)e[n].remove()}}static addEventListener(e,t,i,n){function o(d){return n(e(),d)}return t.addEventListener(i,o),function(){t.removeEventListener(i,o)}}}class _e{static register(e){this.plugins.push(e)}static transform(e){for(let t of this.plugins)t.transform&&(e=t.transform(e));return e}static transformGroup(e){var t;for(let i of this.plugins)(t=i.transformGroup)==null||t.call(i,e)}}z(_e,"plugins",[]);class ee{constructor(e,t){if(Array.isArray(e)&&(e={$:e}),e._&&!e.type&&(e.type=e._,delete e._),e=_e.transform(e),Ue(e)&&(e={type:e}),this.template=e,Ue(e.type))e.type.integrate?this.kind="integrated":this.kind="component";else if(typeof e=="string")this.kind="text";else if(e instanceof U){if(this.kind="html",this.html=e.html,b.document){let i=b.document.createElement("div");i.innerHTML=e.html,this.nodes=[...i.childNodes],this.nodes.forEach(n=>n.remove())}}else e instanceof Function?this.kind="dynamic_text":e.type==="comment"?this.kind="comment":e.type===void 0?this.kind="fragment":this.kind="element";if(this.kind==="integrated"&&(e.$&&!e.content&&(e.content=e.$,delete e.$),this.integrated=this.template.type.integrate(this.template,t)),this.kind=="element"&&e.$&&!e.text&&(typeof e.$=="string"||e.$ instanceof U)&&(e.text=e.$,delete e.$),this.kind=="element"||this.kind=="fragment")e.$&&!e.childNodes&&(e.childNodes=e.$,delete e.$),e.childNodes?(Array.isArray(e.childNodes)?e.childNodes=e.childNodes.flat():e.childNodes=[e.childNodes],e.childNodes.forEach(i=>{i._&&!i.type&&(i.type=i._,delete i._)}),_e.transformGroup(e.childNodes),this.childNodes=this.template.childNodes.map(i=>new ee(i,t))):this.childNodes=[];else if(this.isComponent)e.$&&!e.content&&(e.content=e.$,delete e.$);else if(e.childNodes)throw new Error("childNodes only supported on element and fragment nodes")}get isSingleRoot(){return this.isFragment?this.childNodes.length==1&&this.childNodes[0].isSingleRoot:this.isComponent?this.template.type.isSingleRoot:this.isIntegrated?this.integrated.isSingleRoot:this.kind=="html"?this.nodes.length==1:!0}get isComponent(){return this.kind==="component"}get isFragment(){return this.kind==="fragment"}get isIntegrated(){return this.kind==="integrated"}*enumLocalNodes(){if(this.isFragment||(yield this),this.childNodes)for(let e=0;e<this.childNodes.length;e++)yield*this.childNodes[e].enumLocalNodes()}spreadChildDomNodes(){return Array.from(e(this)).filter(t=>t.length>0).join(", ");function*e(t){for(let i=0;i<t.childNodes.length;i++)yield t.childNodes[i].spreadDomNodes()}}spreadDomNodes(){return Array.from(this.enumAllNodes()).join(", ")}*enumAllNodes(){switch(this.kind){case"fragment":for(let e=0;e<this.childNodes.length;e++)yield*this.childNodes[e].enumAllNodes();break;case"component":case"integrated":this.isSingleRoot?yield`${this.name}.rootNode`:yield`...${this.name}.rootNodes`;break;case"html":this.nodes.length>0&&(this.nodes.length>1?yield`...${this.name}`:yield`${this.name}`);break;default:yield this.name}}}var q,V,C,oe,k,le,ve,Y,X,Le,Je,Ne;const me=class me{constructor(e){v(this,Le);v(this,q);v(this,V);v(this,C);v(this,oe);v(this,k);v(this,le);v(this,ve);v(this,Y);v(this,X,!0);v(this,Ne);var t,i;p(this,q,e.context),p(this,ve,e.nodes[1]),p(this,oe,(t=b.document)==null?void 0:t.createTextNode("")),p(this,le,(i=b.document)==null?void 0:i.createTextNode("")),p(this,k,[]),p(this,X,e.data.ownsContent??!0),e.nodes[0]?this.content=e.nodes[0]():this.content=e.data.content}static integrate(e,t){let i=null;e.content&&typeof e.content=="object"&&(i=e.content,delete e.content);let n={isSingleRoot:!1,data:{ownsContent:e.ownsContent??!0,content:e.content},nodes:[i?new ee(i,t):null,e.placeholder?new ee(e.placeholder,t):null]};return delete e.content,delete e.placeholder,delete e.ownsContent,n}static transform(e){return e instanceof Function&&!Ue(e)?{type:me,content:e}:(e.type=="embed-slot"&&(e.type=me),e)}static transformGroup(e){for(let t=1;t<e.length;t++)e[t].else!==void 0&&(e[t-1]=me.transform(e[t-1]),e[t-1].type===me&&!e[t-1].placeholder&&(delete e[t].else,e[t-1].placeholder=e[t],e.splice(t,1),t--))}get rootNodes(){return[r(this,oe),...r(this,k),r(this,le)]}get isSingleRoot(){return!1}get ownsContent(){return r(this,X)}set ownsContent(e){p(this,X,e)}get content(){return r(this,V)}set content(e){p(this,V,e),r(this,V)instanceof Function?this.replaceContent(r(this,V).call(r(this,q).model,r(this,q).model,r(this,q))):this.replaceContent(r(this,V))}update(){r(this,V)instanceof Function&&this.replaceContent(r(this,V).call(r(this,q).model,r(this,q).model,r(this,q)))}bind(){var e,t;r(this,Y)&&((t=(e=r(this,C))==null?void 0:e.bind)==null||t.call(e))}unbind(){var e,t;r(this,Y)&&((t=(e=r(this,C))==null?void 0:e.unbind)==null||t.call(e))}get isAttached(){}setMounted(e){var t,i;p(this,Ne,e),(i=(t=r(this,C))==null?void 0:t.setMounted)==null||i.call(t,e)}replaceContent(e){var t,i,n,o,d,h;if(!(e==r(this,C)||!e&&r(this,Y))){if(r(this,Le,Je)){let f=r(this,oe).nextSibling;for(;f!=r(this,le);){let m=f.nextSibling;f.remove(),f=m}}if(r(this,Ne)&&((i=(t=r(this,C))==null?void 0:t.setMounted)==null||i.call(t,!1)),p(this,k,[]),r(this,X)&&((o=(n=r(this,C))==null?void 0:n.destroy)==null||o.call(n)),p(this,C,e),p(this,Y,!1),!e)r(this,ve)&&(p(this,C,r(this,ve).call(this,r(this,q))),p(this,Y,!0),p(this,k,r(this,C).rootNodes));else if(e.rootNodes!==void 0)p(this,k,e.rootNodes);else if(Array.isArray(e))p(this,k,e);else if(b.Node!==void 0&&e instanceof b.Node)p(this,k,[e]);else if(e instanceof U){let f=b.document.createElement("span");f.innerHTML=e.html,p(this,k,[...f.childNodes])}else if(typeof e=="string")p(this,k,[b.document.createTextNode(e)]);else if(e.render)p(this,k,[]);else throw new Error("Embed slot requires component, array of HTML nodes or a single HTML node");r(this,Le,Je)&&r(this,le).before(...r(this,k)),r(this,Ne)&&((h=(d=r(this,C))==null?void 0:d.setMounted)==null||h.call(d,!0))}}destroy(){var e,t;r(this,X)&&((t=(e=r(this,C))==null?void 0:e.destroy)==null||t.call(e))}render(e){var t,i;r(this,C)&&((i=(t=r(this,C)).render)==null||i.call(t,e))}};q=new WeakMap,V=new WeakMap,C=new WeakMap,oe=new WeakMap,k=new WeakMap,le=new WeakMap,ve=new WeakMap,Y=new WeakMap,X=new WeakMap,Le=new WeakSet,Je=function(){var e;return((e=r(this,oe))==null?void 0:e.parentNode)!=null},Ne=new WeakMap;let ze=me;_e.register(ze);function Vt(l,e){let t=Math.min(l.length,e.length),i=Math.max(l.length,e.length),n=0;for(;n<t&&l[n]==e[n];)n++;if(n==i)return[];if(n==l.length)return[{op:"insert",index:l.length,count:e.length-l.length}];let o=0;for(;o<t-n&&l[l.length-o-1]==e[e.length-o-1];)o++;if(o==l.length)return[{op:"insert",index:0,count:e.length-l.length}];if(n+o==l.length)return[{op:"insert",index:n,count:e.length-l.length}];if(n+o==e.length)return[{op:"delete",index:n,count:l.length-e.length}];let d=l.length-o,h=e.length-o,f=te(e,n,h),m=null,w=[],u=n,N=n;for(;u<h;){for(;u<h&&l[N]==e[u];)f.delete(e[u],u),u++,N++;let c=u,_=N;for(;N<d&&!f.has(l[N]);)N++;if(N>_){w.push({op:"delete",index:c,count:N-_});continue}for(m||(m=te(l,u,d));u<h&&!m.has(e[u]);)f.delete(e[u],u),u++;if(u>c){w.push({op:"insert",index:c,count:u-c});continue}break}if(u==h)return w;let a=0,I=new rt;for(;N<d;){let c=N;for(;N<d&&!f.has(l[N]);)N++;if(N>c){w.push({op:"delete",index:u,count:N-c});continue}for(;N<d&&f.consume(l[N])!==void 0;)I.add(l[N],a++),N++;N>c&&w.push({op:"store",index:u,count:N-c})}for(;u<h;){let c=u;for(;u<h&&!I.has(e[u]);)u++;if(u>c){w.push({op:"insert",index:c,count:u-c});continue}let _={op:"restore",index:u,count:0};for(w.push(_);u<h;){let B=I.consume(e[u]);if(B===void 0)break;_.count==0?(_.storeIndex=B,_.count=1):_.storeIndex+_.count==B?_.count++:(_={op:"restore",index:u,storeIndex:B,count:1},w.push(_)),u++}}return w;function te(c,_,B){let ce=new rt;for(let ue=_;ue<B;ue++)ce.add(c[ue],ue);return ce}}var Q;class rt{constructor(){v(this,Q,new Map)}add(e,t){let i=r(this,Q).get(e);i?i.push(t):r(this,Q).set(e,[t])}delete(e,t){let i=r(this,Q).get(e);if(i){let n=i.indexOf(t);if(n>=0){i.splice(n,1);return}}throw new Error("key/value pair not found")}consume(e){let t=r(this,Q).get(e);if(!(!t||t.length==0))return t.shift()}has(e){return r(this,Q).has(e)}}Q=new WeakMap;var xe,j,P,y,Ae,Fe,K,ae,de,he,ne,dt,We,ht,Ze,ct,Ge,ut,Ye,se;const ge=class ge{constructor(e){v(this,y);v(this,xe);v(this,j);v(this,P,!1);v(this,K);v(this,ae);v(this,de);v(this,he);var t,i;this.itemConstructor=e.data.itemConstructor,this.outer=e.context,this.items=e.data.template.items,this.condition=e.data.template.condition,this.itemKey=e.data.template.itemKey,this.emptyConstructor=e.nodes.length?e.nodes[0]:null,this.itemDoms=[],p(this,xe,(t=b.document)==null?void 0:t.createComment(" enter foreach block ")),p(this,j,(i=b.document)==null?void 0:i.createComment(" leave foreach block ")),this.itemConstructor.isSingleRoot?(p(this,K,S(this,y,ct)),p(this,de,S(this,y,ut)),p(this,ae,S(this,y,Ge)),p(this,he,S(this,y,Ye))):(p(this,K,S(this,y,dt)),p(this,de,S(this,y,ht)),p(this,ae,S(this,y,We)),p(this,he,S(this,y,Ze)))}static integrate(e,t){let i={itemConstructor:t.compileTemplate(e.template),template:{items:e.items,condition:e.condition,itemKey:e.itemKey}},n;return e.empty&&(n=[new ee(e.empty,t)]),delete e.template,delete e.items,delete e.condition,delete e.itemKey,delete e.empty,{isSingleRoot:!1,data:i,nodes:n}}static transform(e){if(e.foreach===void 0)return e;let t;return e.foreach instanceof Function||Array.isArray(e.foreach)?(t={type:ge,template:e,items:e.foreach},delete e.foreach):(t=Object.assign({},e.foreach,{type:ge,template:e}),delete e.foreach),t}static transformGroup(e){for(let t=1;t<e.length;t++)e[t].else!==void 0&&(e[t-1].foreach!==void 0&&(e[t-1]=ge.transform(e[t-1])),e[t-1].type===ge&&!e[t-1].else&&(delete e[t].else,e[t-1].empty=e[t],e.splice(t,1),t--))}onObservableUpdate(e,t,i){let n={outer:this.outer};if(i==0&&t==0){let o=this.observableItems[e],d=[o],h=null;this.itemKey&&(n.model=o,h=[this.itemKey.call(o,o,n)]),S(this,y,se).call(this,d,h,e,0,1)}else{let o=null,d=this.observableItems.slice(e,e+i);this.itemKey&&(o=d.map(h=>(n.model=h,this.itemKey.call(h,h,n)))),i&&t?S(this,y,Ae).call(this,e,t,d,o):t!=0?r(this,de).call(this,e,t):i!=0&&r(this,K).call(this,d,o,e,0,i),S(this,y,Fe).call(this)}}get rootNodes(){let e=this.emptyDom?this.emptyDom.rootNodes:[];if(this.itemConstructor.isSingleRoot)return[r(this,xe),...this.itemDoms.map(t=>t.rootNode),...e,r(this,j)];{let t=[r(this,xe)];for(let i=0;i<this.itemDoms.length;i++)t.push(...this.itemDoms[i].rootNodes);return t.push(...e),t.push(r(this,j)),t}}setMounted(e){p(this,P,e),pe(this.itemDoms,e)}update(){let e;this.items instanceof Function?e=this.items.call(this.outer.model,this.outer.model,this.outer):e=this.items,e=e??[],this.observableItems!=null&&this.observableItems!=e&&this.observableItems.removeListener(this._onObservableUpdate),Array.isArray(e)&&e.isObservable&&this.observableItems!=e&&(this._onObservableUpdate=this.onObservableUpdate.bind(this),this.observableItems=e,this.observableItems.addListener(this._onObservableUpdate),r(this,de).call(this,0,this.itemDoms.length),this.itemsLoaded=!1);let t={outer:this.outer},i=null;if(this.observableItems||this.condition&&(e=e.filter(n=>(t.model=n,this.condition.call(n,n,t)))),this.itemKey&&(i=e.map(n=>(t.model=n,this.itemKey.call(n,n,t)))),!this.itemsLoaded){this.itemsLoaded=!0,r(this,K).call(this,e,i,0,0,e.length),S(this,y,Fe).call(this);return}this.observableItems||S(this,y,Ae).call(this,0,this.itemDoms.length,e,i)}render(e){e.write("<!-- enter foreach block -->");for(let t=0;t<this.itemDoms.length;t++)this.itemDoms[t].render(e);e.write("<!-- leave foreach block -->")}bind(){var e,t;(t=(e=this.emptyDom)==null?void 0:e.bind)==null||t.call(e)}unbind(){var e,t;(t=(e=this.emptyDom)==null?void 0:e.unbind)==null||t.call(e)}destroy(){this.observableItems!=null&&(this.observableItems.removeListener(this._onObservableUpdate),this.observableItems=null),De(this.itemDoms),this.itemDoms=null}};xe=new WeakMap,j=new WeakMap,P=new WeakMap,y=new WeakSet,Ae=function(e,t,i,n){let o=e+t,d;e==0&&t==this.itemDoms.length?d=this.itemDoms:d=this.itemDoms.slice(e,o);let h;if(n?h=Vt(d.map(c=>c.context.key),n):i.length>d.length?h=[{op:"insert",index:d.length,count:i.length-d.length}]:i.length<d.length?h=[{op:"delete",index:i.length,count:d.length-i.length}]:h=[],h.length==0){S(this,y,se).call(this,i,n,e,0,t);return}let f=[],m=[],w={insert:N,delete:a,store:I,restore:te},u=0;for(let c of h)c.index>u&&(S(this,y,se).call(this,i,n,e+u,u,c.index-u),u=c.index),w[c.op].call(this,c);u<i.length&&S(this,y,se).call(this,i,n,e+u,u,i.length-u),r(this,P)&&pe(m,!1),De(m),S(this,y,Fe).call(this);function N(c){u+=c.count;let _=Math.min(m.length,c.count);_&&(r(this,ae).call(this,c.index+e,m.splice(0,_)),S(this,y,se).call(this,i,n,c.index+e,c.index,_)),_<c.count&&r(this,K).call(this,i,n,c.index+e+_,c.index+_,c.count-_)}function a(c){m.push(...r(this,he).call(this,c.index+e,c.count))}function I(c){f.push(...r(this,he).call(this,c.index+e,c.count))}function te(c){u+=c.count,r(this,ae).call(this,c.index+e,f.slice(c.storeIndex,c.storeIndex+c.count)),S(this,y,se).call(this,i,n,c.index+e,c.index,c.count)}},Fe=function(){if(this.itemDoms.length==0)!this.emptyDom&&this.emptyConstructor&&(this.emptyDom=this.emptyConstructor(),r(this,y,ne)&&r(this,j).before(...this.emptyDom.rootNodes),r(this,P)&&this.emptyDom.setMounted(!0)),this.emptyDom&&this.emptyDom.update();else if(this.emptyDom){if(r(this,y,ne))for(var e of this.emptyDom.rootNodes)e.remove();r(this,P)&&this.emptyDome.setMounted(!1),this.emptyDom.destroy(),this.emptyDom=null}},K=new WeakMap,ae=new WeakMap,de=new WeakMap,he=new WeakMap,ne=function(){var e;return((e=r(this,j))==null?void 0:e.parentNode)!=null},dt=function(e,t,i,n,o){let d=[];for(let h=0;h<o;h++){let f={outer:this.outer,model:e[n+h],key:t==null?void 0:t[n+h],index:i+h};d.push(this.itemConstructor(f))}S(this,y,We).call(this,i,d),r(this,P)&&pe(d,!0)},We=function(e,t){if(this.itemDoms.splice(e,0,...t),r(this,y,ne)){let i=[];t.forEach(o=>i.push(...o.rootNodes));let n;e+t.length<this.itemDoms.length?n=this.itemDoms[e+t.length].rootNodes[0]:n=r(this,j),n.before(...i)}},ht=function(e,t){let i=S(this,y,Ze).call(this,e,t);r(this,P)&&pe(i,!1),De(i)},Ze=function(e,t){if(r(this,y,ne))for(let i=0;i<t;i++){let n=this.itemDoms[e+i].rootNodes;for(let o=0;o<n.length;o++)n[o].remove()}return this.itemDoms.splice(e,t)},ct=function(e,t,i,n,o){let d=[];for(let h=0;h<o;h++){let f={outer:this.outer,model:e[n+h],key:t==null?void 0:t[n+h],index:i+h};d.push(this.itemConstructor(f))}S(this,y,Ge).call(this,i,d),r(this,P)&&pe(d,!0)},Ge=function(e,t){if(this.itemDoms.splice(e,0,...t),r(this,y,ne)){let i=t.map(o=>o.rootNode),n;e+t.length<this.itemDoms.length?n=this.itemDoms[e+t.length].rootNode:n=r(this,j),n.before(...i)}},ut=function(e,t){let i=S(this,y,Ye).call(this,e,t);r(this,P)&&pe(i,!1),De(i)},Ye=function(e,t){if(r(this,y,ne))for(let i=0;i<t;i++)this.itemDoms[e+i].rootNode.remove();return this.itemDoms.splice(e,t)},se=function(e,t,i,n,o){for(let d=0;d<o;d++){let h=this.itemDoms[i+d];h.context.key=t==null?void 0:t[n+d],h.context.index=i+d,h.context.model=e[n+d],h.rebind(),h.update()}};let He=ge;function De(l){for(let e=l.length-1;e>=0;e--)l[e].destroy()}function pe(l,e){for(let t=l.length-1;t>=0;t--)l[t].setMounted(e)}_e.register(He);function ot(l){let e=function(){var i;let t=(i=b.document)==null?void 0:i.createComment(l);return{get rootNode(){return t},get rootNodes(){return[t]},get isSingleRoot(){return!0},setMounted(n){},destroy(){},update(){},render(n){n.write(`<!--${Ie(l)}-->`)}}};return e.isSingleRoot=!0,e}var Te;const Oe=class Oe{constructor(e){v(this,Te,!1);this.branches=e.data,this.branch_constructors=[],this.context=e.context;for(let t of this.branches)t.nodeIndex!==void 0?this.branch_constructors.push(e.nodes[t.nodeIndex]):this.branch_constructors.push(ot(" IfBlock placeholder "));this.activeBranchIndex=-1,this.activeBranch=ot(" IfBlock placeholder ")()}static integrate(e,t){let i=[],n=[],o=!1,d=!0;for(let h=0;h<e.branches.length;h++){let f=e.branches[h],m={};if(i.push(m),f.condition instanceof Function?(m.condition=f.condition,o=!1):f.condition!==void 0?(m.condition=()=>f.condition,o=!!f.condition):(m.condition=()=>!0,o=!0),f.template!==void 0){let w=new ee(f.template,t);w.isSingleRoot||(d=!1),m.nodeIndex=n.length,n.push(w)}}return delete e.branches,o||i.push({condition:()=>!0}),{isSingleRoot:d,nodes:n,data:i}}static transform(e){if(e.if===void 0)return e;let t={type:Oe,branches:[{template:e,condition:e.if}]};return delete e.if,t}static transformGroup(e){let t=null;for(let i=0;i<e.length;i++){let n=e[i];if(n.if)t={type:Oe,branches:[{condition:n.if,template:n}]},delete n.if,e.splice(i,1,t);else if(n.elseif){if(!t)throw new Error("template has 'elseif' without a preceeding condition");t.branches.push({condition:n.elseif,template:n}),delete n.elseif,e.splice(i,1),i--}else if(n.else!==void 0){if(!t)throw new Error("template has 'else' without a preceeding condition");t.branches.push({condition:!0,template:n}),delete n.else,t=null,e.splice(i,1),i--}else t=null}}destroy(){this.activeBranch.destroy()}update(){this.switchActiveBranch(),this.activeBranch.update()}render(e){this.activeBranch.render(e)}unbind(){var e,t;(t=(e=this.activeBranch).unbind)==null||t.call(e)}bind(){var e,t;(t=(e=this.activeBranch).bind)==null||t.call(e)}switchActiveBranch(e){let t=this.resolveActiveBranch();if(t!=this.activeBranchIndex){let i=this.activeBranch;this.activeBranchIndex=t,this.activeBranch=this.branch_constructors[t](),at.replaceMany(i.rootNodes,this.activeBranch.rootNodes),r(this,Te)&&(i.setMounted(!1),this.activeBranch.setMounted(!0)),i.destroy()}}resolveActiveBranch(){for(let e=0;e<this.branches.length;e++)if(this.branches[e].condition.call(this.context.model,this.context.model,this.context))return e;throw new Error("internal error, IfBlock didn't resolve to a branch")}setMounted(e){p(this,Te,e),this.activeBranch.setMounted(e)}get rootNodes(){return this.activeBranch.rootNodes}get rootNode(){return this.activeBranch.rootNode}};Te=new WeakMap;let Xe=Oe;_e.register(Xe);function jt(l,e){let t=1,i=1,n=[],o=null,d=new ee(l,e),h=new Map;return{code:m(d,!0).toString(),isSingleRoot:d.isSingleRoot,refs:n};function m(w,u){let N={emit_text_node:ue,emit_html_node:yt,emit_dynamic_text_node:bt,emit_comment_node:wt,emit_fragment_node:Nt,emit_element_node:xt,emit_integrated_node:$t,emit_component_node:vt},a=new Qe;a.create=a.addFunction("create").code,a.bind=a.addFunction("bind").code,a.update=a.addFunction("update").code,a.unbind=a.addFunction("unbind").code,a.setMounted=a.addFunction("setMounted",["mounted"]).code,a.destroy=a.addFunction("destroy").code;let I;u&&(I=a.addFunction("rebind").code);let te=new Map;u&&(o=a,o.code.append("let model = context.model;"),o.code.append("let document = env.document;")),a.code.append("create();"),a.code.append("bind();"),a.code.append("update();"),ce(w),a.bind.closure.isEmpty||(a.create.append("bind();"),a.destroy.closure.addProlog().append("unbind();"));let c=[];return w.isSingleRoot&&c.push(`  get rootNode() { return ${w.spreadDomNodes()}; },`),u?(c.push("  context,"),w==d&&h.forEach((s,g)=>c.push(`  get ${g}() { return ${s}; },`)),a.getFunction("bind").isEmpty?I.append("model = context.model"):(I.append("if (model != context.model)"),I.braced(()=>{I.append("unbind();"),I.append("model = context.model"),I.append("bind();")})),c.push("  rebind,")):(c.push("  bind,"),c.push("  unbind,")),a.code.append(["return { ","  update,","  destroy,","  setMounted,",`  get rootNodes() { return [ ${w.spreadDomNodes()} ]; },`,`  isSingleRoot: ${w.isSingleRoot},`,...c,"};"]),a;function _(s){s.template.export?o.addLocal(s.name):a.addLocal(s.name)}function B(){a.update.temp_declared||(a.update.temp_declared=!0,a.update.append("let temp;"))}function ce(s){s.name=`n${t++}`,N[`emit_${s.kind}_node`](s)}function ue(s){_(s),a.create.append(`${s.name} = document.createTextNode(${JSON.stringify(s.template)});`)}function yt(s){s.nodes.length!=0&&(_(s),s.nodes.length==1?(a.create.append(`${s.name} = refs[${n.length}].cloneNode(true);`),n.push(s.nodes[0])):(a.create.append(`${s.name} = refs[${n.length}].map(x => x.cloneNode(true));`),n.push(s.nodes)))}function bt(s){_(s);let g=`p${i++}`;a.addLocal(g),a.create.append(`${s.name} = helpers.createTextNode("");`),B(),a.update.append(`temp = ${H(n.length)};`),a.update.append(`if (temp !== ${g})`),a.update.append(`  ${s.name} = helpers.setNodeText(${s.name}, ${g} = ${H(n.length)});`),n.push(s.template)}function wt(s){if(_(s),s.template.text instanceof Function){let g=`p${i++}`;a.addLocal(g),a.create.append(`${s.name} = document.createComment("");`),B(),a.update.append(`temp = ${H(n.length)};`),a.update.append(`if (temp !== ${g})`),a.update.append(`  ${s.name}.nodeValue = ${g} = temp;`),n.push(s.template.text)}else a.create.append(`${s.name} = document.createComment(${JSON.stringify(s.template.text)});`)}function $t(s){let g=[],L=!1;if(s.integrated.nodes)for(let $=0;$<s.integrated.nodes.length;$++){let x=s.integrated.nodes[$];if(!x){g.push(null);continue}x.name=`n${t++}`;let E=m(x,!1);E.getFunction("bind").isEmpty||(L=!0);let tt=`${x.name}_constructor_${$+1}`,St=a.addFunction(tt,[]);E.appendTo(St.code),g.push(tt)}a.update.append(`${s.name}.update()`),L&&(a.bind.append(`${s.name}.bind()`),a.unbind.append(`${s.name}.unbind()`));let T=-1;s.integrated.data&&(T=n.length,n.push(s.integrated.data)),_(s),a.create.append(`${s.name} = new refs[${n.length}]({`,"  context,",`  data: ${s.integrated.data?`refs[${T}]`:"null"},`,`  nodes: [ ${g.join(", ")} ],`,"});"),n.push(s.template.type),a.setMounted.append(`${s.name}.setMounted(mounted);`),a.destroy.append(`${s.name}?.destroy();`),a.destroy.append(`${s.name} = null;`);for(let $ of Object.keys(s.template))if(!qe(s,$))throw new Error(`Unknown element template key: ${$}`)}function vt(s){_(s),a.create.append(`${s.name} = new refs[${n.length}]();`),n.push(s.template.type);let g=new Set(s.template.type.slots??[]),L=s.template.update==="auto",T=!1;a.setMounted.append(`${s.name}.setMounted(mounted);`),a.destroy.append(`${s.name}?.destroy();`),a.destroy.append(`${s.name} = null;`);for(let $ of Object.keys(s.template)){if(qe(s,$)||$=="update")continue;if(g.has($)){if(s.template[$]===void 0)continue;let E=new ee(s.template[$],e);ce(E),E.isSingleRoot?a.create.append(`${s.name}${ie($)}.content = ${E.name};`):a.create.append(`${s.name}${ie($)}.content = [${E.spreadDomNodes()}];`);continue}let x=typeof s.template[$];if(x=="string"||x=="number"||x=="boolean")a.create.append(`${s.name}${ie($)} = ${JSON.stringify(s.template[$])}`);else if(x==="function"){L&&!T&&(T=`${s.name}_mod`,a.update.append(`let ${T} = false;`));let E=`p${i++}`;a.addLocal(E);let et=n.length;B(),a.update.append(`temp = ${H(et)};`),a.update.append(`if (temp !== ${E})`),L&&(a.update.append("{"),a.update.append(`  ${T} = true;`)),a.update.append(`  ${s.name}${ie($)} = ${E} = temp;`),L&&a.update.append("}"),n.push(s.template[$])}else{let E=s.template[$];E instanceof Mt&&(E=E.value),a.create.append(`${s.name}${ie($)} = refs[${n.length}];`),n.push(E)}}s.template.update&&(typeof s.template.update=="function"?(a.update.append(`if (${H(n.length)})`),a.update.append(`  ${s.name}.update();`),n.push(s.template.update)):L?T&&(a.update.append(`if (${T})`),a.update.append(`  ${s.name}.update();`)):a.update.append(`${s.name}.update();`))}function Nt(s){Ke(s)}function xt(s){var T;let g=a.current_xmlns,L=s.template.xmlns;L===void 0&&s.template.type=="svg"&&(L="http://www.w3.org/2000/svg"),L==null&&(L=a.current_xmlns),_(s),L?(a.current_xmlns=L,a.create.append(`${s.name} = document.createElementNS(${JSON.stringify(L)}, ${JSON.stringify(s.template.type)});`)):a.create.append(`${s.name} = document.createElement(${JSON.stringify(s.template.type)});`),a.destroy.append(`${s.name} = null;`);for(let $ of Object.keys(s.template))if(!qe(s,$)){if($=="id"){A(s.template.id,x=>`${s.name}.setAttribute("id", ${x});`);continue}if($=="class"){A(s.template.class,x=>`${s.name}.setAttribute("class", ${x});`);continue}if($.startsWith("class_")){let x=je($.substring(6));A(s.template[$],E=>`helpers.setNodeClass(${s.name}, ${JSON.stringify(x)}, ${E})`);continue}if($=="style"){A(s.template.style,x=>`${s.name}.setAttribute("style", ${x});`);continue}if($.startsWith("style_")){let x=je($.substring(6));A(s.template[$],E=>`helpers.setNodeStyle(${s.name}, ${JSON.stringify(x)}, ${E})`);continue}if($=="display"){if(s.template.display instanceof Function)a.addLocal(`${s.name}_prev_display`),A(s.template[$],x=>`${s.name}_prev_display = helpers.setNodeDisplay(${s.name}, ${x}, ${s.name}_prev_display)`);else if(typeof s.template.display=="string")a.create.append(`${s.name}.style.display = '${s.template.display}';`);else if(s.template.display===!1||s.template.display===null||s.template.display===void 0)a.create.append(`${s.name}.style.display = 'none';`);else if(s.template.display!==!0)throw new Error("display property must be set to string, true, false, or null");continue}if($.startsWith("attr_")){let x=$.substring(5);if(x=="style"||x=="class"||x=="id")throw new Error(`Incorrect attribute: use '${x}' instead of '${$}'`);a.current_xmlns||(x=je(x)),A(s.template[$],E=>`helpers.setElementAttribute(${s.name}, ${JSON.stringify(x)}, ${E})`);continue}if($=="text"){s.template.text instanceof Function?A(s.template.text,x=>`helpers.setElementText(${s.name}, ${x})`):s.template.text instanceof U&&a.create.append(`${s.name}.innerHTML = ${JSON.stringify(s.template.text.html)};`),typeof s.template.text=="string"&&a.create.append(`${s.name}.innerText = ${JSON.stringify(s.template.text)};`);continue}throw new Error(`Unknown element template key: ${$}`)}Ke(s),(T=s.childNodes)!=null&&T.length&&a.create.append(`${s.name}.append(${s.spreadChildDomNodes()});`),a.current_xmlns=g}function Ke(s){if(s.childNodes)for(let g=0;g<s.childNodes.length;g++)ce(s.childNodes[g])}function qe(s,g){if(_t(g))return!0;if(g=="export"){if(typeof s.template.export!="string")throw new Error("'export' must be a string");if(h.has(s.template.export))throw new Error(`duplicate export name '${s.template.export}'`);return h.set(s.template.export,s.name),!0}if(g=="bind"){if(typeof s.template.bind!="string")throw new Error("'bind' must be a string");if(te.has(s.template.export))throw new Error(`duplicate bind name '${s.template.bind}'`);return te.set(s.template.bind,!0),a.bind.append(`model${ie(s.template.bind)} = ${s.name};`),a.unbind.append(`model${ie(s.template.bind)} = null;`),!0}if(g.startsWith("on_")){let L=g.substring(3);if(!(s.template[g]instanceof Function))throw new Error(`event handler for '${g}' is not a function`);s.listenerCount||(s.listenerCount=0),s.listenerCount++;let T=`${s.name}_ev${s.listenerCount}`;return a.addLocal(T),a.create.append(`${T} = helpers.addEventListener(() => model, ${s.name}, ${JSON.stringify(L)}, refs[${n.length}]);`),n.push(s.template[g]),a.destroy.append(`${T}?.();`),a.destroy.append(`${T} = null;`),!0}return g=="debug_create"?(typeof s.template[g]=="function"?(a.create.append(`if (${H(n.length)})`),a.create.append("  debugger;"),n.push(s.template[g])):s.template[g]&&a.create.append("debugger;"),!0):g=="debug_update"?(typeof s.template[g]=="function"?(a.update.append(`if (${H(n.length)})`),a.update.append("  debugger;"),n.push(s.template[g])):s.template[g]&&a.update.append("debugger;"),!0):g=="debug_render"}function _t(s){return s=="type"||s=="childNodes"||s=="xmlns"}function H(s){return`refs[${s}].call(model, model, context)`}function A(s,g){if(s instanceof Function){let L=`p${i++}`;a.addLocal(L),g(),B(),a.update.append(`temp = ${H(n.length)};`),a.update.append(`if (temp !== ${L})`),a.update.append(`  ${g(L+" = temp")};`),n.push(s)}else a.create.append(g(JSON.stringify(s)))}}}let Ut=1;function ft(l,e){e=e??{},e.compileTemplate=ft;let t=jt(l,e),i=new Function("env","refs","helpers","context",t.code),n=function(o){return o||(o={}),o.$instanceId=Ut++,i(b,t.refs,at,o??{})};return n.isSingleRoot=t.isSingleRoot,n}class zt extends Tt{constructor(){super(),this.browser=!0,this.document=document,this.compileTemplate=ft,this.window=window,this.requestAnimationFrame=window.requestAnimationFrame.bind(window),this.Node=Node}}typeof document<"u"&&Ct(new zt);const pt={science:"M200-120q-51 0-72.5-45.5T138-250l222-270v-240h-40q-17 0-28.5-11.5T280-800q0-17 11.5-28.5T320-840h320q17 0 28.5 11.5T680-800q0 17-11.5 28.5T640-760h-40v240l222 270q32 39 10.5 84.5T760-120H200Zm0-80h560L520-492v-268h-80v268L200-200Zm280-280Z"};function Wt(l,e){return`<svg xmlns=http://www.w3.org/2000/svg" height="${e}px" width="${e}" viewBox="0 -960 960 960"><path d="${pt[l]}"/></svg>`}function Jt(l,e,t){t=t??1;let i=(t-1)*960;return{type:"svg",attr_width:e,attr_height:e,attr_viewBox:`${i} ${-960+i} ${960-i*2} ${960-i*2}`,attr_preserveAspectRatio:"xMidYMid slice",attr_role:"img",$:{type:"path",attr_d:pt[l]}}}class Ht extends Re{}z(Ht,"template",{_:"header",id:"header",$:[{_:"a",class:"title",attr_href:"/",$:[{type:"img",attr_src:"/codeonly-logo.svg"},"CodeOnly"]},{_:"div",class:"buttons",$:[{type:"a",class:"subtle button",attr_href:"/guide/",text:"Docs"},{type:"a",class:"subtle button labLink vcenter",attr_href:"/lab",$:[Jt("science",19)," The Lab"]},{type:"input",attr_type:"checkbox",attr_checked:window.stylish.darkMode?"checked":void 0,class:"theme-switch",on_click:()=>window.stylish.toggleTheme()}]}]});Dt.declare(`
:root
{
    --header-height: 50px;
}

#header
{
    position: fixed;
    top: 0;
    width: 100%;
    height: var(--header-height);

    display: flex;
    justify-content: start;
    align-items: center;
    border-bottom: 1px solid var(--gridline-color);
    padding-left: 10px;
    padding-right: 10px;
    background-color: rgb(from var(--back-color) r g b / 75%);
    z-index: 1;

    .title 
    {
        flex-grow: 1;
        display: flex;
        align-items: center;
        color: var(--body-fore-color);
        transition: opacity 0.2s;

        &:hover
        {
            opacity: 75%;
        }

        img
        {
            height: calc(var(--header-height) - 25px);
            padding-right: 10px
        }
    }


    .buttons
    {
        font-size: 12pt;
        display: flex;
        gap: 10px;
        align-items: center;

        .theme-switch
        {
            transform: translateY(-1.5px);
        }
    }

    .lablink
    {
        svg 
        { 
            transform: translateY(-1px) scale(1.1);
            margin-right: 2px;
        };
    }
}
`);let mt=new Ot(new qt);new Pt(mt);class gt extends Re{constructor(e){super(),this.url=e}}z(gt,"template",{type:"div",class:"center",$:[{type:"h1",class:"danger",text:"Page not found! 😟"},{type:"p",text:e=>`The page ${e.url} doesn't exist!`},{type:"p",$:{type:"a",attr_href:"/",text:"Return Home"}}]});mt.register({match:l=>(l.page=new gt(l.url),!0),order:1e3});export{Re as C,U as H,gt as N,Dt as S,Ht as a,b as e,Wt as h,mt as r};
